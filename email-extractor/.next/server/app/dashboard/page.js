(()=>{var e={};e.id=702,e.ids=[702],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},5443:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=s(482),a=s(9108),i=s(2563),n=s.n(i),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9865)),"/Users/sankalp/fs5/email-extractor/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6339)),"/Users/sankalp/fs5/email-extractor/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2943)),"/Users/sankalp/fs5/email-extractor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/sankalp/fs5/email-extractor/app/dashboard/page.tsx"],u="/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3275:(e,t,s)=>{Promise.resolve().then(s.bind(s,5840))},6252:(e,t,s)=>{Promise.resolve().then(s.bind(s,3699))},6305:(e,t,s)=>{Promise.resolve().then(s.bind(s,5476))},8753:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},6121:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(5344);function a({children:e,variant:t="primary",size:s="md",isLoading:a=!1,className:i="",disabled:n,...l}){return(0,r.jsxs)("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500"}[t]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s]} ${i}`,disabled:n||a,...l,children:[a?(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,e]})}},3081:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(5344);function a({children:e,className:t=""}){return r.jsx("div",{className:`bg-white shadow rounded-lg p-6 ${t}`,children:e})}},5840:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AuthProvider:()=>d,useAuth:()=>u});var r=s(5344),a=s(3729),i=s(8014),n=s(2254),l=s(2829);let o=(0,a.createContext)(void 0),c={sankalp:"funnelstrike@135",lee:"funnelstrike@135"};function d({children:e}){let t=(0,n.useRouter)(),[s,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{h();let{data:e}=l.O.auth.onAuthStateChange(async(e,t)=>{t?.user?(m({id:t.user.id,username:t.user.email||t.user.id}),d(!1)):h()});return()=>{e?.subscription.unsubscribe()}},[]);let h=()=>{let e=i.Z.get("user");if(e)try{m(JSON.parse(e))}catch(e){i.Z.remove("user"),m(null)}d(!1)},x=async(e,s)=>{d(!0);try{if(e.includes("@")){let{data:r,error:a}=await l.O.auth.signInWithPassword({email:e,password:s});if(a)throw a;if(r.user){m({id:r.user.id,username:r.user.email||r.user.id}),t.push("/dashboard");return}}if(c[e]===s){let s={username:e};m(s),i.Z.set("user",JSON.stringify(s),{expires:7}),t.push("/dashboard")}else throw Error("Invalid username or password")}catch(e){throw console.error("Login error:",e),e}finally{d(!1)}},p=async()=>{d(!0),await l.O.auth.signOut(),m(null),i.Z.remove("user"),d(!1),t.push("/auth/login")};return r.jsx(o.Provider,{value:{user:u,login:x,logout:p,isLoading:s},children:e})}function u(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5344),a=s(3729),i=s(2254),n=s(783),l=s.n(n),o=s(5840),c=s(6121);function d({children:e}){let t=(0,i.useRouter)(),s=(0,i.usePathname)(),{user:n,logout:d}=(0,o.useAuth)(),[u,m]=(0,a.useState)(!1),h="/dashboard/jobs"===s||s&&s.startsWith("/dashboard/jobs/");return((0,a.useEffect)(()=>{m(!0),n||t.push("/auth/login")},[n,t]),u&&n)?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx(l(),{href:"/dashboard",className:"text-xl font-bold text-gray-900",children:"Email Extractor"})}),(0,r.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[r.jsx(l(),{href:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/dashboard"===s?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Create Job"}),r.jsx(l(),{href:"/dashboard/jobs",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${h?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"My Jobs"})]})]}),r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)("div",{className:"flex items-center ml-4",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700 mr-2",children:["Welcome, ",n?.username,"!"]}),r.jsx(c.Z,{variant:"outline",size:"sm",onClick:d,children:"Logout"})]})})]})})}),r.jsx("main",{className:"py-6",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e})})]}):null}},5476:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5344),a=s(3729),i=s(2254),n=s(6121),l=s(3081);function o(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(1),[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)([]),[m,h]=(0,a.useState)(""),[x,p]=(0,a.useState)([]),[f,b]=(0,a.useState)(0),[g,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(null),P=async e=>{e.preventDefault(),j(!0),w(null);try{let e=o;if(e.includes("spreadsheets/d/")){let t=e.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);if(t&&t[1]){let s=t[1];e=`https://docs.google.com/spreadsheets/d/${s}/export?format=csv`}}let t=await fetch(e);if(!t.ok)throw Error("Could not access the spreadsheet. Make sure it's accessible via public link.");let r=(await t.text()).split("\n").map(e=>e.split(",").map(e=>e.trim()));if(r.length>0){let e=r[0];u(e),s(2)}else throw Error("Spreadsheet appears to be empty or has invalid format")}catch(e){w(e.message)}finally{j(!1)}},k=async e=>{j(!0),h(e);try{let t=d.findIndex(t=>t===e);if(-1===t)throw Error("Selected column not found");let r=o;if(r.includes("spreadsheets/d/")){let e=r.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);if(e&&e[1]){let t=e[1];r=`https://docs.google.com/spreadsheets/d/${t}/export?format=csv`}}let a=await fetch(r);if(!a.ok)throw Error("Could not access the spreadsheet");let i=(await a.text()).split("\n").map(e=>e.split(",").map(e=>e.trim())).slice(1).map(e=>{if(e.length<=t)return null;let s=e[t].replace(/^"|"$/g,"").trim();return s?(s.startsWith("http://")||s.startsWith("https://")||(s="https://"+s),s):null}).filter(Boolean);p(i),b(i.length),s(3)}catch(e){w(e.message)}finally{j(!1)}},S=async t=>{t.preventDefault(),j(!0),w(null);try{let t=await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g,urls:x})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create job")}c(""),u([]),h(""),p([]),b(0),y(""),s(1),e.push("/dashboard/jobs")}catch(e){w(e.message)}finally{j(!1)}};return(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Create Job"}),(0,r.jsxs)(l.Z,{className:"max-w-2xl mx-auto space-y-8",children:[1===t&&(0,r.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"sheet-url",className:"block text-sm font-medium text-gray-700",children:"Google Sheet URL"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Paste the URL of your Google Sheet. Make sure it's accessible to anyone with the link."}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{type:"url",id:"sheet-url",name:"sheet-url",required:!0,className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"https://docs.google.com/spreadsheets/d/...",value:o,onChange:e=>c(e.target.value)})})]}),r.jsx(n.Z,{type:"submit",isLoading:v,className:"w-full",children:"Load Columns"})]}),2===t&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Select URL Column"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Which column contains your website URLs?"}),r.jsx("div",{className:"grid gap-3",children:d.map(e=>r.jsx("button",{onClick:()=>k(e),className:"text-left px-4 py-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500",children:e},e))}),r.jsx(n.Z,{onClick:()=>s(1),variant:"secondary",className:"mt-4",children:"Back"})]}),3===t&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["Found ",f,' websites in column "',m,'"']})}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"job-name",className:"block text-sm font-medium text-gray-700",children:"Job Name"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{type:"text",name:"job-name",id:"job-name",required:!0,className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter a name for this extraction job",value:g,onChange:e=>y(e.target.value)})})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx(n.Z,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>s(2),children:"Back"}),r.jsx(n.Z,{type:"submit",isLoading:v,className:"flex-1",children:"Create Job"})]})]})]}),N&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsx("p",{className:"text-sm text-red-700",children:N})})]})]})}},2829:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var r=s(3125);let a="https://plhyblzjjmlqxbcsmbed.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsaHlibHpqam1scXhiY3NtYmVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2NzY2NDEsImV4cCI6MjA1ODI1MjY0MX0.0TXPUbeQujOEXMDULq_ecdyyxbJP3vJOVJfuR3BKf88";a&&i||console.warn("Supabase credentials not found. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.");let n=(0,r.eI)(a,i)},6339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/dashboard/layout.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},9865:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/dashboard/page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},2943:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,metadata:()=>u});var r=s(5036),a=s(8592),i=s.n(a);s(7272);var n=s(6843);let l=(0,n.createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/context/AuthContext.tsx`),{__esModule:o,$$typeof:c}=l;l.default;let d=(0,n.createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/context/AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/context/AuthContext.tsx#useAuth`);let u={title:"Email Extractor",description:"Extract emails from websites using Google Sheets"};function m({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:r.jsx(d,{children:e})})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,303,783],()=>s(5443));module.exports=r})();