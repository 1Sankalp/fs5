(()=>{var e={};e.id=740,e.ids=[740],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8492:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=s(482),a=s(9108),i=s(2563),l=s.n(i),n=s(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5445)),"/Users/sankalp/fs5/email-extractor/app/dashboard/jobs/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6339)),"/Users/sankalp/fs5/email-extractor/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2943)),"/Users/sankalp/fs5/email-extractor/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/sankalp/fs5/email-extractor/app/dashboard/jobs/page.tsx"],u="/dashboard/jobs/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/jobs/page",pathname:"/dashboard/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2077:(e,t,s)=>{Promise.resolve().then(s.bind(s,5840))},1688:(e,t,s)=>{Promise.resolve().then(s.bind(s,2242))},6252:(e,t,s)=>{Promise.resolve().then(s.bind(s,3699))},8753:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},6121:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(5344);function a({children:e,variant:t="primary",size:s="md",isLoading:a=!1,className:i="",disabled:l,...n}){return(0,r.jsxs)("button",{className:`inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ${{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500"}[t]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s]} ${i}`,disabled:l||a,...n,children:[a?(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,e]})}},3081:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(5344);function a({children:e,className:t=""}){return r.jsx("div",{className:`bg-white shadow rounded-lg p-6 ${t}`,children:e})}},5840:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AuthProvider:()=>d,useAuth:()=>u});var r=s(5344),a=s(3729),i=s(8014),l=s(2254),n=s(2829);let o=(0,a.createContext)(void 0),c={sankalp:"funnelstrike@135",lee:"funnelstrike@135"};function d({children:e}){let t=(0,l.useRouter)(),[s,d]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{m();let{data:e}=n.O.auth.onAuthStateChange(async(e,t)=>{t?.user?(x({id:t.user.id,username:t.user.email||t.user.id}),d(!1)):m()});return()=>{e?.subscription.unsubscribe()}},[]);let m=()=>{let e=i.Z.get("user");if(e)try{x(JSON.parse(e))}catch(e){i.Z.remove("user"),x(null)}d(!1)},h=async(e,s)=>{d(!0);try{if(e.includes("@")){let{data:r,error:a}=await n.O.auth.signInWithPassword({email:e,password:s});if(a)throw a;if(r.user){x({id:r.user.id,username:r.user.email||r.user.id}),t.push("/dashboard");return}}if(c[e]===s){let s={username:e};x(s),i.Z.set("user",JSON.stringify(s),{expires:7}),t.push("/dashboard")}else throw Error("Invalid username or password")}catch(e){throw console.error("Login error:",e),e}finally{d(!1)}},p=async()=>{d(!0),await n.O.auth.signOut(),x(null),i.Z.remove("user"),d(!1),t.push("/auth/login")};return r.jsx(o.Provider,{value:{user:u,login:h,logout:p,isLoading:s},children:e})}function u(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2242:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5344),a=s(3729),i=s(2254),l=s(5840),n=s(6121),o=s(3081),c=s(2829);function d(){let e=(0,i.useRouter)(),{user:t,logout:s}=(0,l.useAuth)(),[d,u]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(""),[P,k]=(0,a.useState)([]),[S,C]=(0,a.useState)(""),[_,E]=(0,a.useState)(0),[q,A]=(0,a.useState)(""),[I,J]=(0,a.useState)(!1);(0,a.useEffect)(()=>{O();let e=setInterval(O,5e3);return()=>clearInterval(e)},[]);let O=async()=>{try{let e=await fetch("/api/jobs");if(!e.ok)throw Error("Failed to fetch jobs");let t=await e.json();u(t.jobs||[])}catch(e){console.error("Error fetching jobs:",e),p(e.message)}finally{m(!1)}},U=async()=>{J(!0),p(null);try{let e=await fetch("/api/sheets/columns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetUrl:N})});if(!e.ok)throw Error("Failed to fetch sheet columns");let t=await e.json();k(t.columns)}catch(e){p(e.message)}finally{J(!1)}},Z=async e=>{J(!0),C(e);try{let t=await fetch("/api/sheets/urls-count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetUrl:N,column:e})});if(!t.ok)throw Error("Failed to count URLs");let s=await t.json();E(s.count)}catch(e){p(e.message)}finally{J(!1)}},L=async e=>{e.preventDefault(),J(!0),p(null);try{if(!(await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:q,sheetUrl:N,column:S})})).ok)throw Error("Failed to create job");v(!1),w(""),k([]),C(""),E(0),A(""),await O()}catch(e){p(e.message)}finally{J(!1)}},M=t=>{e.push(`/dashboard/jobs/${t}`)},$=e=>{y(e)},z=async()=>{if(g){f(!0);try{let{error:e}=await c.O.from("jobs").delete().eq("id",g);if(e)throw Error(e.message);await O(),y(null)}catch(e){p(e.message)}finally{f(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 py-6",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Jobs"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",t?.username,"!"]}),r.jsx(n.Z,{variant:"outline",onClick:s,children:"Logout"})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[!j&&r.jsx("div",{className:"flex justify-end",children:r.jsx(n.Z,{onClick:()=>v(!0),children:"New Job"})}),j&&r.jsx(o.Z,{className:"mb-8",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"sheet-url",className:"block text-sm font-medium text-gray-700",children:"Google Sheet URL"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Paste the URL of your Google Sheet. Make sure it's accessible to anyone with the link."}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{type:"url",id:"sheet-url",required:!0,className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"https://docs.google.com/spreadsheets/d/...",value:N,onChange:e=>w(e.target.value),onBlur:U})})]}),P.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Select URL Column"}),r.jsx("div",{className:"grid gap-3",children:P.map(e=>r.jsx("button",{onClick:()=>Z(e),className:`text-left px-4 py-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 ${S===e?"bg-primary-50 border-primary-500":""}`,children:e},e))})]}),_>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["Found ",_,' websites in column "',S,'"']})}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"job-name",className:"block text-sm font-medium text-gray-700",children:"Job Name"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{type:"text",id:"job-name",required:!0,className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter a name for this extraction job",value:q,onChange:e=>A(e.target.value)})})]})]}),h&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsx("p",{className:"text-sm text-red-700",children:h})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx(n.Z,{variant:"outline",onClick:()=>{v(!1),p(null)},children:"Cancel"}),_>0&&q&&r.jsx(n.Z,{onClick:L,isLoading:I,children:"Create Job"})]})]})}),r.jsx(o.Z,{children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Job Name"}),r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Emails Found"}),r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading jobs..."})}):0===d.length?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No jobs found. Create a new job to get started."})}):d.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"completed"===e.status?"bg-green-100 text-green-800":"processing"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${e.total_urls?e.processed_urls/e.total_urls*100:0}%`}})}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 mt-1",children:[e.total_urls?(e.processed_urls/e.total_urls*100).toFixed(2):"0.00","%"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.emails?.length||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(n.Z,{variant:"outline",size:"sm",onClick:()=>M(e.id),children:"View Details"}),r.jsx(n.Z,{variant:"outline",size:"sm",className:"border-red-300 text-red-600 hover:bg-red-50",onClick:()=>$(e.id),children:"Delete"})]})})]},e.id))})]})})})]})]}),g&&r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Deletion"}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Are you sure you want to delete this job? This action cannot be undone, and any in-progress extraction will be stopped."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx(n.Z,{variant:"outline",onClick:()=>{y(null)},disabled:b,children:"Cancel"}),r.jsx(n.Z,{className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",onClick:z,isLoading:b,children:"Delete"})]})]})})]})}},3699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5344),a=s(3729),i=s(2254),l=s(783),n=s.n(l),o=s(5840),c=s(6121);function d({children:e}){let t=(0,i.useRouter)(),s=(0,i.usePathname)(),{user:l,logout:d}=(0,o.useAuth)(),[u,x]=(0,a.useState)(!1),m="/dashboard/jobs"===s||s&&s.startsWith("/dashboard/jobs/");return((0,a.useEffect)(()=>{x(!0),l||t.push("/auth/login")},[l,t]),u&&l)?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx(n(),{href:"/dashboard",className:"text-xl font-bold text-gray-900",children:"Email Extractor"})}),(0,r.jsxs)("nav",{className:"ml-6 flex space-x-8",children:[r.jsx(n(),{href:"/dashboard",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/dashboard"===s?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Create Job"}),r.jsx(n(),{href:"/dashboard/jobs",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${m?"border-primary-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"My Jobs"})]})]}),r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)("div",{className:"flex items-center ml-4",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700 mr-2",children:["Welcome, ",l?.username,"!"]}),r.jsx(c.Z,{variant:"outline",size:"sm",onClick:d,children:"Logout"})]})})]})})}),r.jsx("main",{className:"py-6",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e})})]}):null}},2829:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var r=s(3125);let a="https://plhyblzjjmlqxbcsmbed.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsaHlibHpqam1scXhiY3NtYmVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2NzY2NDEsImV4cCI6MjA1ODI1MjY0MX0.0TXPUbeQujOEXMDULq_ecdyyxbJP3vJOVJfuR3BKf88";a&&i||console.warn("Supabase credentials not found. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.");let l=(0,r.eI)(a,i)},5445:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,s(6843).createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/dashboard/jobs/page.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default},6339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,s(6843).createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/dashboard/layout.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default},2943:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,metadata:()=>u});var r=s(5036),a=s(8592),i=s.n(a);s(7272);var l=s(6843);let n=(0,l.createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/context/AuthContext.tsx`),{__esModule:o,$$typeof:c}=n;n.default;let d=(0,l.createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/context/AuthContext.tsx#AuthProvider`);(0,l.createProxy)(String.raw`/Users/sankalp/fs5/email-extractor/app/context/AuthContext.tsx#useAuth`);let u={title:"Email Extractor",description:"Extract emails from websites using Google Sheets"};function x({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:r.jsx(d,{children:e})})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,303,783],()=>s(8492));module.exports=r})();