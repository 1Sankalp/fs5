(()=>{var e={};e.id=204,e.ids=[204],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6088:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>w,patchFetch:()=>O,requestAsyncStorage:()=>v,routeModule:()=>m,serverHooks:()=>S,staticGenerationAsyncStorage:()=>_,staticGenerationBailout:()=>A});var s={};r.r(s),r.d(s,{GET:()=>g,POST:()=>j});var o=r(5419),n=r(9108),a=r(9678),i=r(8070),u=r(7147),l=r.n(u),c=r(1017),d=r.n(c),f=r(8234),p=r(2455);let y=d().join(process.cwd(),"data"),b=d().join(y,"jobs.json");l().existsSync(y)||l().mkdirSync(y,{recursive:!0});let h=[];try{if(l().existsSync(b)){let e=l().readFileSync(b,"utf8");h=JSON.parse(e),console.log(`Loaded ${h.length} jobs from storage`)}}catch(e){console.error("Error loading jobs from storage:",e)}async function g(){try{let e;let t=(0,p.cookies)().get("user");if(!t?.value)return i.Z.json({error:"Unauthorized"},{status:401});try{e=JSON.parse(t.value)}catch(e){return i.Z.json({error:"Invalid session"},{status:401})}let{data:r,error:s}=await f.O.from("jobs").select("*").eq("user_id",e.id||e.username).order("created_at",{ascending:!1});if(s)return console.error("Error fetching jobs:",s),i.Z.json({error:s.message},{status:500});return i.Z.json({jobs:r||[]})}catch(e){return console.error("Error in GET /api/jobs:",e),i.Z.json({error:"Internal server error",message:e instanceof Error?e.message:String(e)},{status:500})}}async function j(e){try{let t;let{name:r,urls:s}=await e.json();if(!r||!s||!Array.isArray(s))return i.Z.json({error:"Invalid request - name and urls array are required"},{status:400});let o=(0,p.cookies)().get("user");if(!o?.value)return i.Z.json({error:"Unauthorized"},{status:401});try{t=JSON.parse(o.value)}catch(e){return i.Z.json({error:"Invalid session"},{status:401})}let{data:n,error:a}=await f.O.from("jobs").insert({name:r,urls:s,user_id:t.id||t.username,status:"pending",total_urls:s.length,processed_urls:0,current_batch:0,emails:[],last_processed_timestamp:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select();if(a)return console.error("Error creating job:",a),i.Z.json({error:a.message},{status:500});return i.Z.json({job:n?.[0],message:"Job created successfully"},{status:201})}catch(e){return console.error("Error in POST /api/jobs:",e),i.Z.json({error:"Internal server error",message:e instanceof Error?e.message:String(e)},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/jobs/route",pathname:"/api/jobs",filename:"route",bundlePath:"app/api/jobs/route"},resolvedPagePath:"/Users/sankalp/fs5/email-extractor/app/api/jobs/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:_,serverHooks:S,headerHooks:x,staticGenerationBailout:A}=m,w="/api/jobs/route";function O(){return(0,a.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:_})}},8234:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var s=r(6323);let o="https://plhyblzjjmlqxbcsmbed.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsaHlibHpqam1scXhiY3NtYmVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2NzY2NDEsImV4cCI6MjA1ODI1MjY0MX0.0TXPUbeQujOEXMDULq_ecdyyxbJP3vJOVJfuR3BKf88";o&&n||console.warn("Supabase credentials not found. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.");let a=(0,s.eI)(o,n)},8284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return o}});let s=r(2973);class o{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,s.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,s.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{headers:function(){return c},cookies:function(){return d},draftMode:function(){return f}});let s=r(7366),o=r(3022),n=r(3608),a=r(4580),i=r(2934),u=r(2973),l=r(8284);function c(){if((0,u.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return o.HeadersAdapter.seal(new Headers({}));let e=a.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return e.headers}function d(){if((0,u.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return s.RequestCookiesAdapter.seal(new n.RequestCookies(new Headers({})));let e=a.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let t=i.actionAsyncStorage.getStore();return t&&(t.isAction||t.isAppRoute)?e.mutableCookies:e.cookies}function f(){let e=a.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new l.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DYNAMIC_ERROR_CODE:function(){return r},DynamicServerError:function(){return s}});let r="DYNAMIC_SERVER_USAGE";class s extends Error{constructor(e){super("Dynamic server usage: "+e),this.digest=r}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"staticGenerationBailout",{enumerable:!0,get:function(){return i}});let s=r(8096),o=r(5869);class n extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function a(e,t){let{dynamic:r,link:s}=t||{};return"Page"+(r?' with `dynamic = "'+r+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(s?" See more info here: "+s:"")}let i=(e,t)=>{let{dynamic:r,link:i}=void 0===t?{}:t,u=o.staticGenerationAsyncStorage.getStore();if(!u)return!1;if(u.forceStatic)return!0;if(u.dynamicShouldError)throw new n(a(e,{link:i,dynamic:null!=r?r:"error"}));let l=a(e,{dynamic:r,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==u.postpone||u.postpone.call(u,e),u.revalidate=0,u.isStaticGeneration){let t=new s.DynamicServerError(l);throw u.dynamicUsageDescription=e,u.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyHeadersError:function(){return o},HeadersAdapter:function(){return n}});let s=r(6250);class o extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new o}}class n extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,o){if("symbol"==typeof r)return s.ReflectAdapter.get(t,r,o);let n=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===n);if(void 0!==a)return s.ReflectAdapter.get(t,a,o)},set(t,r,o,n){if("symbol"==typeof r)return s.ReflectAdapter.set(t,r,o,n);let a=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);return s.ReflectAdapter.set(t,i??r,o,n)},has(t,r){if("symbol"==typeof r)return s.ReflectAdapter.has(t,r);let o=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0!==n&&s.ReflectAdapter.has(t,n)},deleteProperty(t,r){if("symbol"==typeof r)return s.ReflectAdapter.deleteProperty(t,r);let o=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0===n||s.ReflectAdapter.deleteProperty(t,n)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return o.callable;default:return s.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new n(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,s]of this.entries())e.call(t,s,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},6250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let s=Reflect.get(e,t,r);return"function"==typeof s?s.bind(e):s}static set(e,t,r,s){return Reflect.set(e,t,r,s)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},7366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyRequestCookiesError:function(){return n},RequestCookiesAdapter:function(){return a},getModifiedCookieValues:function(){return u},appendMutableCookies:function(){return l},MutableRequestCookiesAdapter:function(){return c}});let s=r(3608),o=r(6250);class n extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new n}}class a{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return n.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}}let i=Symbol.for("next.mutated.cookies");function u(e){let t=e[i];return t&&Array.isArray(t)&&0!==t.length?t:[]}function l(e,t){let r=u(t);if(0===r.length)return!1;let o=new s.ResponseCookies(e),n=o.getAll();for(let e of r)o.set(e);for(let e of n)o.set(e);return!0}class c{static wrap(e,t){let r=new s.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],a=new Set,u=()=>{var e;let o=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore.call(fetch))?void 0:e.getStore();if(o&&(o.pathWasRevalidated=!0),n=r.getAll().filter(e=>a.has(e.name)),t){let e=[];for(let t of n){let r=new s.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case i:return n;case"delete":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{u()}};case"set":return function(...t){a.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{u()}};default:return o.ReflectAdapter.get(e,t,r)}}})}}},2455:(e,t,r)=>{e.exports=r(8290)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,323],()=>r(6088));module.exports=s})();