"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/jobs/[id]/process/route";
exports.ids = ["app/api/jobs/[id]/process/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&page=%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&page=%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_sankalp_fs5_email_extractor_app_api_jobs_id_process_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/jobs/[id]/process/route.ts */ \"(rsc)/./app/api/jobs/[id]/process/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/jobs/[id]/process/route\",\n        pathname: \"/api/jobs/[id]/process\",\n        filename: \"route\",\n        bundlePath: \"app/api/jobs/[id]/process/route\"\n    },\n    resolvedPagePath: \"/Users/sankalp/fs5/email-extractor/app/api/jobs/[id]/process/route.ts\",\n    nextConfigOutput,\n    userland: _Users_sankalp_fs5_email_extractor_app_api_jobs_id_process_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/jobs/[id]/process/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZqb2JzJTJGJTVCaWQlNUQlMkZwcm9jZXNzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZqb2JzJTJGJTVCaWQlNUQlMkZwcm9jZXNzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGam9icyUyRiU1QmlkJTVEJTJGcHJvY2VzcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNhbmthbHAlMkZmczUlMkZlbWFpbC1leHRyYWN0b3IlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGc2Fua2FscCUyRmZzNSUyRmVtYWlsLWV4dHJhY3RvciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNxQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2VtYWlsLWV4dHJhY3Rvci8/NzdmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2Fua2FscC9mczUvZW1haWwtZXh0cmFjdG9yL2FwcC9hcGkvam9icy9baWRdL3Byb2Nlc3Mvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2pvYnMvW2lkXS9wcm9jZXNzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvam9icy9baWRdL3Byb2Nlc3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2pvYnMvW2lkXS9wcm9jZXNzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NhbmthbHAvZnM1L2VtYWlsLWV4dHJhY3Rvci9hcHAvYXBpL2pvYnMvW2lkXS9wcm9jZXNzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2pvYnMvW2lkXS9wcm9jZXNzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&page=%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/jobs/[id]/process/route.ts":
/*!********************************************!*\
  !*** ./app/api/jobs/[id]/process/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _route__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../route */ \"(rsc)/./app/api/jobs/route.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_emailExtractor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/emailExtractor */ \"(rsc)/./lib/emailExtractor.ts\");\n\n\n\n\n\n// Storage file path\nconst storageFile = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"jobs.json\");\n// Helper function to save jobs to storage\nfunction saveJobs() {\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(storageFile, JSON.stringify(_route__WEBPACK_IMPORTED_MODULE_1__.jobs, null, 2));\n    } catch (error) {\n        console.error(\"Error saving jobs to storage:\", error);\n    }\n}\nasync function POST(request, { params }) {\n    try {\n        // Check if the jobs array is empty (server restarted)\n        if (_route__WEBPACK_IMPORTED_MODULE_1__.jobs.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Cannot process job. Server has been restarted. Please create a new job.\"\n            }, {\n                status: 400\n            });\n        }\n        const jobIndex = _route__WEBPACK_IMPORTED_MODULE_1__.jobs.findIndex((job)=>job.id === params.id);\n        if (jobIndex === -1) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Job not found\"\n            }, {\n                status: 404\n            });\n        }\n        const job = _route__WEBPACK_IMPORTED_MODULE_1__.jobs[jobIndex];\n        // Only process pending jobs\n        if (job.status !== \"pending\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Job is already processing or completed\"\n            }, {\n                status: 400\n            });\n        }\n        // Update job status\n        job.status = \"processing\";\n        job.progress = 0;\n        job.emails = [];\n        job.startTime = Date.now();\n        job.estimatedCompletionTime = calculateEstimatedCompletionTime(job.totalUrls);\n        // Save job status change to file\n        saveJobs();\n        // Start processing in the background\n        processJob(job);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"Job processing started\"\n        });\n    } catch (error) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error.message || \"Failed to process job\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Calculate estimated completion time based on number of URLs\nfunction calculateEstimatedCompletionTime(totalUrls) {\n    // We add 1 second per URL + a small buffer (avg processing time)\n    const processingTimePerUrl = 1000; // 1 second per URL\n    const buffer = 5000; // 5 second buffer\n    return Date.now() + totalUrls * processingTimePerUrl + buffer;\n}\n// Update estimated completion time based on current progress\nfunction updateEstimatedCompletionTime(job, processedUrls) {\n    // Use current time if startTime is undefined\n    const startTime = job.startTime || Date.now();\n    const elapsedTime = Date.now() - startTime;\n    const remainingUrls = job.totalUrls - processedUrls;\n    if (processedUrls > 0 && remainingUrls > 0) {\n        // Calculate average time per URL based on current performance\n        const avgTimePerUrl = elapsedTime / processedUrls;\n        // Estimate remaining time\n        const remainingTime = avgTimePerUrl * remainingUrls;\n        // Update estimated completion time\n        job.estimatedCompletionTime = Date.now() + remainingTime;\n    }\n}\nasync function processJob(job) {\n    const emails = new Set();\n    for(let i = 0; i < job.urls.length; i++){\n        try {\n            const url = job.urls[i];\n            // Use the improved email extractor\n            const extractedEmails = await (0,_lib_emailExtractor__WEBPACK_IMPORTED_MODULE_4__.extractEmails)(url);\n            // Add unique emails to the set\n            extractedEmails.forEach((email)=>emails.add(email));\n            // Update job progress\n            job.processedUrls = i + 1;\n            job.progress = Math.round(job.processedUrls / job.totalUrls * 100);\n            job.emailsFound = emails.size;\n            job.emails = Array.from(emails);\n            // Update estimated completion time\n            updateEstimatedCompletionTime(job, job.processedUrls);\n            // Save job updates to file periodically (every 5 URLs)\n            if (i % 5 === 0 || i === job.urls.length - 1) {\n                saveJobs();\n            }\n            // Add a small delay to avoid rate limiting\n            await new Promise((resolve)=>setTimeout(resolve, 1000));\n        } catch (error) {\n            console.error(`Error processing URL ${job.urls[i]}:`, error);\n        // Continue with next URL\n        }\n    }\n    // Mark job as completed\n    job.status = \"completed\";\n    job.progress = 100;\n    job.estimatedCompletionTime = Date.now(); // Set to current time since it's complete\n    // Save final job state to file\n    saveJobs();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2pvYnMvW2lkXS9wcm9jZXNzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ0g7QUFDcEI7QUFDSTtBQUM2QjtBQUVyRCxvQkFBb0I7QUFDcEIsTUFBTUssY0FBY0YsZ0RBQVMsQ0FBQ0ksUUFBUUMsR0FBRyxJQUFJLFFBQVE7QUFFckQsMENBQTBDO0FBQzFDLFNBQVNDO0lBQ1AsSUFBSTtRQUNGUCx1REFBZ0IsQ0FBQ0csYUFBYU0sS0FBS0MsU0FBUyxDQUFDWCx3Q0FBSUEsRUFBRSxNQUFNO0lBQzNELEVBQUUsT0FBT1ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsaUNBQWlDQTtJQUNqRDtBQUNGO0FBRU8sZUFBZUUsS0FDcEJDLE9BQWdCLEVBQ2hCLEVBQUVDLE1BQU0sRUFBOEI7SUFFdEMsSUFBSTtRQUNGLHNEQUFzRDtRQUN0RCxJQUFJaEIsd0NBQUlBLENBQUNpQixNQUFNLEtBQUssR0FBRztZQUNyQixPQUFPbEIsa0ZBQVlBLENBQUNtQixJQUFJLENBQ3RCO2dCQUFFTixPQUFPO1lBQTBFLEdBQ25GO2dCQUFFTyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxXQUFXcEIsd0NBQUlBLENBQUNxQixTQUFTLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSUMsRUFBRSxLQUFLUCxPQUFPTyxFQUFFO1FBRTdELElBQUlILGFBQWEsQ0FBQyxHQUFHO1lBQ25CLE9BQU9yQixrRkFBWUEsQ0FBQ21CLElBQUksQ0FDdEI7Z0JBQUVOLE9BQU87WUFBZ0IsR0FDekI7Z0JBQUVPLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1HLE1BQU10Qix3Q0FBSSxDQUFDb0IsU0FBUztRQUUxQiw0QkFBNEI7UUFDNUIsSUFBSUUsSUFBSUgsTUFBTSxLQUFLLFdBQVc7WUFDNUIsT0FBT3BCLGtGQUFZQSxDQUFDbUIsSUFBSSxDQUN0QjtnQkFBRU4sT0FBTztZQUF5QyxHQUNsRDtnQkFBRU8sUUFBUTtZQUFJO1FBRWxCO1FBRUEs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QUlPLHVCQUF1QixHQUFHRixLQUFLQyxHQUFHLElBQUksMENBQTBDO0lBRXBGLCtCQUErQjtJQUMvQnBCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbWFpbC1leHRyYWN0b3IvLi9hcHAvYXBpL2pvYnMvW2lkXS9wcm9jZXNzL3JvdXRlLnRzP2Q5NjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgam9icywgSm9iIH0gZnJvbSAnLi4vLi4vcm91dGUnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZXh0cmFjdEVtYWlscyB9IGZyb20gJ0AvbGliL2VtYWlsRXh0cmFjdG9yJztcblxuLy8gU3RvcmFnZSBmaWxlIHBhdGhcbmNvbnN0IHN0b3JhZ2VGaWxlID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ2pvYnMuanNvbicpO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2F2ZSBqb2JzIHRvIHN0b3JhZ2VcbmZ1bmN0aW9uIHNhdmVKb2JzKCkge1xuICB0cnkge1xuICAgIGZzLndyaXRlRmlsZVN5bmMoc3RvcmFnZUZpbGUsIEpTT04uc3RyaW5naWZ5KGpvYnMsIG51bGwsIDIpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgam9icyB0byBzdG9yYWdlOicsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChcbiAgcmVxdWVzdDogUmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHRoZSBqb2JzIGFycmF5IGlzIGVtcHR5IChzZXJ2ZXIgcmVzdGFydGVkKVxuICAgIGlmIChqb2JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQ2Fubm90IHByb2Nlc3Mgam9iLiBTZXJ2ZXIgaGFzIGJlZW4gcmVzdGFydGVkLiBQbGVhc2UgY3JlYXRlIGEgbmV3IGpvYi4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBqb2JJbmRleCA9IGpvYnMuZmluZEluZGV4KChqb2IpID0+IGpvYi5pZCA9PT0gcGFyYW1zLmlkKTtcbiAgICBcbiAgICBpZiAoam9iSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdKb2Igbm90IGZvdW5kJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgam9iID0gam9ic1tqb2JJbmRleF07XG4gICAgXG4gICAgLy8gT25seSBwcm9jZXNzIHBlbmRpbmcgam9ic1xuICAgIGlmIChqb2Iuc3RhdHVzICE9PSAncGVuZGluZycpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0pvYiBpcyBhbHJlYWR5IHByb2Nlc3Npbmcgb3IgY29tcGxldGVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGpvYiBzdGF0dXNcbiAgICBqb2Iuc3RhdHVzID0gJ3Byb2Nlc3NpbmcnO1xuICAgIGpvYi5wcm9ncmVzcyA9IDA7XG4gICAgam9iLmVtYWlscyA9IFtdO1xuICAgIGpvYi5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGpvYi5lc3RpbWF0ZWRDb21wbGV0aW9uVGltZSA9IGNhbGN1bGF0ZUVzdGltYXRlZENvbXBsZXRpb25UaW1lKGpvYi50b3RhbFVybHMpO1xuICAgIFxuICAgIC8vIFNhdmUgam9iIHN0YXR1cyBjaGFuZ2UgdG8gZmlsZVxuICAgIHNhdmVKb2JzKCk7XG5cbiAgICAvLyBTdGFydCBwcm9jZXNzaW5nIGluIHRoZSBiYWNrZ3JvdW5kXG4gICAgcHJvY2Vzc0pvYihqb2IpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0pvYiBwcm9jZXNzaW5nIHN0YXJ0ZWQnIH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHByb2Nlc3Mgam9iJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBDYWxjdWxhdGUgZXN0aW1hdGVkIGNvbXBsZXRpb24gdGltZSBiYXNlZCBvbiBudW1iZXIgb2YgVVJMc1xuZnVuY3Rpb24gY2FsY3VsYXRlRXN0aW1hdGVkQ29tcGxldGlvblRpbWUodG90YWxVcmxzOiBudW1iZXIpOiBudW1iZXIge1xuICAvLyBXZSBhZGQgMSBzZWNvbmQgcGVyIFVSTCArIGEgc21hbGwgYnVmZmVyIChhdmcgcHJvY2Vzc2luZyB0aW1lKVxuICBjb25zdCBwcm9jZXNzaW5nVGltZVBlclVybCA9IDEwMDA7IC8vIDEgc2Vjb25kIHBlciBVUkxcbiAgY29uc3QgYnVmZmVyID0gNTAwMDsgLy8gNSBzZWNvbmQgYnVmZmVyXG4gIHJldHVybiBEYXRlLm5vdygpICsgKHRvdGFsVXJscyAqIHByb2Nlc3NpbmdUaW1lUGVyVXJsKSArIGJ1ZmZlcjtcbn1cblxuLy8gVXBkYXRlIGVzdGltYXRlZCBjb21wbGV0aW9uIHRpbWUgYmFzZWQgb24gY3VycmVudCBwcm9ncmVzc1xuZnVuY3Rpb24gdXBkYXRlRXN0aW1hdGVkQ29tcGxldGlvblRpbWUoam9iOiBKb2IsIHByb2Nlc3NlZFVybHM6IG51bWJlcik6IHZvaWQge1xuICAvLyBVc2UgY3VycmVudCB0aW1lIGlmIHN0YXJ0VGltZSBpcyB1bmRlZmluZWRcbiAgY29uc3Qgc3RhcnRUaW1lID0gam9iLnN0YXJ0VGltZSB8fCBEYXRlLm5vdygpO1xuICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gIGNvbnN0IHJlbWFpbmluZ1VybHMgPSBqb2IudG90YWxVcmxzIC0gcHJvY2Vzc2VkVXJscztcbiAgXG4gIGlmIChwcm9jZXNzZWRVcmxzID4gMCAmJiByZW1haW5pbmdVcmxzID4gMCkge1xuICAgIC8vIENhbGN1bGF0ZSBhdmVyYWdlIHRpbWUgcGVyIFVSTCBiYXNlZCBvbiBjdXJyZW50IHBlcmZvcm1hbmNlXG4gICAgY29uc3QgYXZnVGltZVBlclVybCA9IGVsYXBzZWRUaW1lIC8gcHJvY2Vzc2VkVXJscztcbiAgICAvLyBFc3RpbWF0ZSByZW1haW5pbmcgdGltZVxuICAgIGNvbnN0IHJlbWFpbmluZ1RpbWUgPSBhdmdUaW1lUGVyVXJsICogcmVtYWluaW5nVXJscztcbiAgICAvLyBVcGRhdGUgZXN0aW1hdGVkIGNvbXBsZXRpb24gdGltZVxuICAgIGpvYi5lc3RpbWF0ZWRDb21wbGV0aW9uVGltZSA9IERhdGUubm93KCkgKyByZW1haW5pbmdUaW1lO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NKb2Ioam9iOiBKb2IpIHtcbiAgY29uc3QgZW1haWxzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGpvYi51cmxzLmxlbmd0aDsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IGpvYi51cmxzW2ldO1xuICAgICAgLy8gVXNlIHRoZSBpbXByb3ZlZCBlbWFpbCBleHRyYWN0b3JcbiAgICAgIGNvbnN0IGV4dHJhY3RlZEVtYWlscyA9IGF3YWl0IGV4dHJhY3RFbWFpbHModXJsKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIHVuaXF1ZSBlbWFpbHMgdG8gdGhlIHNldFxuICAgICAgZXh0cmFjdGVkRW1haWxzLmZvckVhY2goZW1haWwgPT4gZW1haWxzLmFkZChlbWFpbCkpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgam9iIHByb2dyZXNzXG4gICAgICBqb2IucHJvY2Vzc2VkVXJscyA9IGkgKyAxO1xuICAgICAgam9iLnByb2dyZXNzID0gTWF0aC5yb3VuZCgoam9iLnByb2Nlc3NlZFVybHMgLyBqb2IudG90YWxVcmxzKSAqIDEwMCk7XG4gICAgICBqb2IuZW1haWxzRm91bmQgPSBlbWFpbHMuc2l6ZTtcbiAgICAgIGpvYi5lbWFpbHMgPSBBcnJheS5mcm9tKGVtYWlscyk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBlc3RpbWF0ZWQgY29tcGxldGlvbiB0aW1lXG4gICAgICB1cGRhdGVFc3RpbWF0ZWRDb21wbGV0aW9uVGltZShqb2IsIGpvYi5wcm9jZXNzZWRVcmxzKTtcbiAgICAgIFxuICAgICAgLy8gU2F2ZSBqb2IgdXBkYXRlcyB0byBmaWxlIHBlcmlvZGljYWxseSAoZXZlcnkgNSBVUkxzKVxuICAgICAgaWYgKGkgJSA1ID09PSAwIHx8IGkgPT09IGpvYi51cmxzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgc2F2ZUpvYnMoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIGEgc21hbGwgZGVsYXkgdG8gYXZvaWQgcmF0ZSBsaW1pdGluZ1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBVUkwgJHtqb2IudXJsc1tpXX06YCwgZXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgd2l0aCBuZXh0IFVSTFxuICAgIH1cbiAgfVxuICBcbiAgLy8gTWFyayBqb2IgYXMgY29tcGxldGVkXG4gIGpvYi5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgam9iLnByb2dyZXNzID0gMTAwO1xuICBqb2IuZXN0aW1hdGVkQ29tcGxldGlvblRpbWUgPSBEYXRlLm5vdygpOyAvLyBTZXQgdG8gY3VycmVudCB0aW1lIHNpbmNlIGl0J3MgY29tcGxldGVcbiAgXG4gIC8vIFNhdmUgZmluYWwgam9iIHN0YXRlIHRvIGZpbGVcbiAgc2F2ZUpvYnMoKTtcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImpvYnMiLCJmcyIsInBhdGgiLCJleHRyYWN0RW1haWxzIiwic3RvcmFnZUZpbGUiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsInNhdmVKb2JzIiwid3JpdGVGaWxlU3luYyIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsImNvbnNvbGUiLCJQT1NUIiwicmVxdWVzdCIsInBhcmFtcyIsImxlbmd0aCIsImpzb24iLCJzdGF0dXMiLCJqb2JJbmRleCIsImZpbmRJbmRleCIsImpvYiIsImlkIiwicHJvZ3Jlc3MiLCJlbWFpbHMiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiZXN0aW1hdGVkQ29tcGxldGlvblRpbWUiLCJjYWxjdWxhdGVFc3RpbWF0ZWRDb21wbGV0aW9uVGltZSIsInRvdGFsVXJscyIsInByb2Nlc3NKb2IiLCJtZXNzYWdlIiwicHJvY2Vzc2luZ1RpbWVQZXJVcmwiLCJidWZmZXIiLCJ1cGRhdGVFc3RpbWF0ZWRDb21wbGV0aW9uVGltZSIsInByb2Nlc3NlZFVybHMiLCJlbGFwc2VkVGltZSIsInJlbWFpbmluZ1VybHMiLCJhdmdUaW1lUGVyVXJsIiwicmVtYWluaW5nVGltZSIsIlNldCIsImkiLCJ1cmxzIiwidXJsIiwiZXh0cmFjdGVkRW1haWxzIiwiZm9yRWFjaCIsImVtYWlsIiwiYWRkIiwiTWF0aCIsInJvdW5kIiwiZW1haWxzRm91bmQiLCJzaXplIiwiQXJyYXkiLCJmcm9tIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/jobs/[id]/process/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/jobs/route.ts":
/*!*******************************!*\
  !*** ./app/api/jobs/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   jobs: () => (/* binding */ jobs)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n// Extract spreadsheet ID from URL\nfunction getSpreadsheetId(url) {\n    try {\n        const matches = url.match(/\\/spreadsheets\\/d\\/([a-zA-Z0-9-_]+)/);\n        if (!matches) throw new Error(\"Invalid Google Sheet URL\");\n        return matches[1];\n    } catch (error) {\n        throw new Error(\"Invalid Google Sheet URL\");\n    }\n}\n// Storage file path\nconst storageDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\");\nconst storageFile = path__WEBPACK_IMPORTED_MODULE_2___default().join(storageDir, \"jobs.json\");\n// Ensure storage directory exists\nif (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(storageDir)) {\n    fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(storageDir, {\n        recursive: true\n    });\n}\n// Load jobs from storage or initialize empty array\nlet loadedJobs = [];\ntry {\n    if (fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(storageFile)) {\n        const data = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(storageFile, \"utf8\");\n        loadedJobs = JSON.parse(data);\n        console.log(`Loaded ${loadedJobs.length} jobs from storage`);\n    }\n} catch (error) {\n    console.error(\"Error loading jobs from storage:\", error);\n}\n// In-memory storage for jobs (initialized from file if available)\nconst jobs = loadedJobs;\n// Helper function to save jobs to storage\nfunction saveJobs() {\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(storageFile, JSON.stringify(jobs, null, 2));\n    } catch (error) {\n        console.error(\"Error saving jobs to storage:\", error);\n    }\n}\nasync function GET() {\n    try {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(jobs);\n    } catch (error) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error.message || \"Failed to fetch jobs\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const { name, sheetUrl, column } = await request.json();\n        if (!name || !sheetUrl || !column) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Name, sheet URL and column are required\"\n            }, {\n                status: 400\n            });\n        }\n        const spreadsheetId = getSpreadsheetId(sheetUrl);\n        const csvUrl = `https://docs.google.com/spreadsheets/d/${spreadsheetId}/export?format=csv`;\n        // Fetch the sheet data\n        const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(csvUrl);\n        const rows = response.data.split(\"\\n\");\n        const headers = rows[0].split(\",\").map((col)=>col.trim().replace(/^\"|\"$/g, \"\"));\n        const columnIndex = headers.indexOf(column);\n        if (columnIndex === -1) {\n            throw new Error(\"Column not found\");\n        }\n        // Extract URLs\n        const urls = rows.slice(1).map((row)=>{\n            const cells = row.split(\",\");\n            const cell = cells[columnIndex]?.toLowerCase() || \"\";\n            return cell.includes(\"http\") || cell.includes(\"www.\") ? cells[columnIndex] : null;\n        }).filter(Boolean);\n        // Create job\n        const job = {\n            id: Date.now().toString(),\n            name,\n            sheetUrl,\n            column,\n            urls,\n            totalUrls: urls.length,\n            processedUrls: 0,\n            emailsFound: 0,\n            status: \"pending\",\n            progress: 0,\n            createdAt: new Date().toISOString()\n        };\n        // Store job in memory\n        jobs.push(job);\n        // Save jobs to file\n        saveJobs();\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(job);\n    } catch (error) {\n        console.error(\"Error creating job:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error.message || \"Failed to create job\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxDQUFDLEdBQ3JCUCxHQUFHLENBQUMsQ0FBQ1E7WUFDSixNQUFNQyxRQUFRRCxJQUFJVixLQUFLLENBQUM7WUFDeEIsTUFBTVksT0FBT0QsS0FBSyxDQUFDTCxZQUFZLEVBQUVPLGlCQUFpQjtZQUNsRCxPQUFPRCxLQUFLRSxRQUFRLENBQUMsV0FBV0YsS0FBS0UsUUFBUSxDQUFDLFVBQVVILEtBQUssQ0FBQ0wsWUFBWSxHQUFHO1FBQy9FLEdBQ0NTLE1BQU0sQ0FBQ0M7UUFFVixhQUFhO1FBQ2IsTUFBTUMsTUFBVztZQUNmQyxJQUFJQyxLQUFLQyxHQUFHLEdBQUdDLFFBQVE7WUFDdkI3QjtZQUNBQztZQUNBQztZQUNBYztZQUNBYyxXQUFXZCxLQUFLM0IsTUFBTTtZQUN0QjBDLGVBQWU7WUFDZkMsYUFBYTtZQUNibkMsUUFBUTtZQUNSb0MsVUFBVTtZQUNWQyxXQUFXLElBQUlQLE9BQU9RLFdBQVc7UUFDbkM7UUFFQSxzQkFBc0I7UUFDdEI3QyxLQUFLOEMsSUFBSSxDQUFDWDtRQUVWLG9CQUFvQjtRQUNwQmxDO1FBRUEsT0FBTzNCLGtGQUFZQSxDQUFDK0IsSUFBSSxDQUFDOEI7SUFDM0IsRUFBRSxPQUFPcEQsT0FBWTtRQUNuQmMsUUFBUWQsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsT0FBT1Qsa0ZBQVlBLENBQUMrQixJQUFJLENBQ3RCO1lBQUV0QixPQUFPQSxNQUFNdUIsT0FBTyxJQUFJO1FBQXVCLEdBQ2pEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW1haWwtZXh0cmFjdG9yLy4vYXBwL2FwaS9qb2JzL3JvdXRlLnRzPzllNzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8gRXh0cmFjdCBzcHJlYWRzaGVldCBJRCBmcm9tIFVSTFxuZnVuY3Rpb24gZ2V0U3ByZWFkc2hlZXRJZCh1cmw6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSB1cmwubWF0Y2goL1xcL3NwcmVhZHNoZWV0c1xcL2RcXC8oW2EtekEtWjAtOS1fXSspLyk7XG4gICAgaWYgKCFtYXRjaGVzKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgR29vZ2xlIFNoZWV0IFVSTCcpO1xuICAgIHJldHVybiBtYXRjaGVzWzFdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBHb29nbGUgU2hlZXQgVVJMJyk7XG4gIH1cbn1cblxuLy8gRGVmaW5lIHRoZSBKb2IgaW50ZXJmYWNlIGZvciB0eXBlIHNhZmV0eVxuZXhwb3J0IGludGVyZmFjZSBKb2Ige1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHNoZWV0VXJsOiBzdHJpbmc7XG4gIGNvbHVtbjogc3RyaW5nO1xuICB1cmxzOiBzdHJpbmdbXTtcbiAgdG90YWxVcmxzOiBudW1iZXI7XG4gIHByb2Nlc3NlZFVybHM6IG51bWJlcjtcbiAgZW1haWxzRm91bmQ6IG51bWJlcjtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICBlbWFpbHM/OiBzdHJpbmdbXTtcbiAgc3RhcnRUaW1lPzogbnVtYmVyO1xuICBlc3RpbWF0ZWRDb21wbGV0aW9uVGltZT86IG51bWJlcjtcbn1cblxuLy8gU3RvcmFnZSBmaWxlIHBhdGhcbmNvbnN0IHN0b3JhZ2VEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKTtcbmNvbnN0IHN0b3JhZ2VGaWxlID0gcGF0aC5qb2luKHN0b3JhZ2VEaXIsICdqb2JzLmpzb24nKTtcblxuLy8gRW5zdXJlIHN0b3JhZ2UgZGlyZWN0b3J5IGV4aXN0c1xuaWYgKCFmcy5leGlzdHNTeW5jKHN0b3JhZ2VEaXIpKSB7XG4gIGZzLm1rZGlyU3luYyhzdG9yYWdlRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuLy8gTG9hZCBqb2JzIGZyb20gc3RvcmFnZSBvciBpbml0aWFsaXplIGVtcHR5IGFycmF5XG5sZXQgbG9hZGVkSm9iczogSm9iW10gPSBbXTtcbnRyeSB7XG4gIGlmIChmcy5leGlzdHNTeW5jKHN0b3JhZ2VGaWxlKSkge1xuICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoc3RvcmFnZUZpbGUsICd1dGY4Jyk7XG4gICAgbG9hZGVkSm9icyA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgY29uc29sZS5sb2coYExvYWRlZCAke2xvYWRlZEpvYnMubGVuZ3RofSBqb2JzIGZyb20gc3RvcmFnZWApO1xuICB9XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGpvYnMgZnJvbSBzdG9yYWdlOicsIGVycm9yKTtcbn1cblxuLy8gSW4tbWVtb3J5IHN0b3JhZ2UgZm9yIGpvYnMgKGluaXRpYWxpemVkIGZyb20gZmlsZSBpZiBhdmFpbGFibGUpXG5leHBvcnQgY29uc3Qgam9iczogSm9iW10gPSBsb2FkZWRKb2JzO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2F2ZSBqb2JzIHRvIHN0b3JhZ2VcbmZ1bmN0aW9uIHNhdmVKb2JzKCkge1xuICB0cnkge1xuICAgIGZzLndyaXRlRmlsZVN5bmMoc3RvcmFnZUZpbGUsIEpTT04uc3RyaW5naWZ5KGpvYnMsIG51bGwsIDIpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgam9icyB0byBzdG9yYWdlOicsIGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihqb2JzKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBmZXRjaCBqb2JzJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBuYW1lLCBzaGVldFVybCwgY29sdW1uIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICBpZiAoIW5hbWUgfHwgIXNoZWV0VXJsIHx8ICFjb2x1bW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05hbWUsIHNoZWV0IFVSTCBhbmQgY29sdW1uIGFyZSByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHNwcmVhZHNoZWV0SWQgPSBnZXRTcHJlYWRzaGVldElkKHNoZWV0VXJsKTtcbiAgICBjb25zdCBjc3ZVcmwgPSBgaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvJHtzcHJlYWRzaGVldElkfS9leHBvcnQ/Zm9ybWF0PWNzdmA7XG4gICAgXG4gICAgLy8gRmV0Y2ggdGhlIHNoZWV0IGRhdGFcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChjc3ZVcmwpO1xuICAgIGNvbnN0IHJvd3MgPSByZXNwb25zZS5kYXRhLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBoZWFkZXJzID0gcm93c1swXS5zcGxpdCgnLCcpLm1hcCgoY29sOiBzdHJpbmcpID0+IGNvbC50cmltKCkucmVwbGFjZSgvXlwifFwiJC9nLCAnJykpO1xuICAgIGNvbnN0IGNvbHVtbkluZGV4ID0gaGVhZGVycy5pbmRleE9mKGNvbHVtbik7XG4gICAgXG4gICAgaWYgKGNvbHVtbkluZGV4ID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb2x1bW4gbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBVUkxzXG4gICAgY29uc3QgdXJscyA9IHJvd3Muc2xpY2UoMSlcbiAgICAgIC5tYXAoKHJvdzogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gcm93LnNwbGl0KCcsJyk7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tjb2x1bW5JbmRleF0/LnRvTG93ZXJDYXNlKCkgfHwgJyc7XG4gICAgICAgIHJldHVybiBjZWxsLmluY2x1ZGVzKCdodHRwJykgfHwgY2VsbC5pbmNsdWRlcygnd3d3LicpID8gY2VsbHNbY29sdW1uSW5kZXhdIDogbnVsbDtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgLy8gQ3JlYXRlIGpvYlxuICAgIGNvbnN0IGpvYjogSm9iID0ge1xuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgIG5hbWUsXG4gICAgICBzaGVldFVybCxcbiAgICAgIGNvbHVtbixcbiAgICAgIHVybHMsXG4gICAgICB0b3RhbFVybHM6IHVybHMubGVuZ3RoLFxuICAgICAgcHJvY2Vzc2VkVXJsczogMCxcbiAgICAgIGVtYWlsc0ZvdW5kOiAwLFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBwcm9ncmVzczogMCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIC8vIFN0b3JlIGpvYiBpbiBtZW1vcnlcbiAgICBqb2JzLnB1c2goam9iKTtcbiAgICBcbiAgICAvLyBTYXZlIGpvYnMgdG8gZmlsZVxuICAgIHNhdmVKb2JzKCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oam9iKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGpvYjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGNyZWF0ZSBqb2InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJheGlvcyIsImZzIiwicGF0aCIsImdldFNwcmVhZHNoZWV0SWQiLCJ1cmwiLCJtYXRjaGVzIiwibWF0Y2giLCJFcnJvciIsImVycm9yIiwic3RvcmFnZURpciIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwic3RvcmFnZUZpbGUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwibG9hZGVkSm9icyIsImRhdGEiLCJyZWFkRmlsZVN5bmMiLCJKU09OIiwicGFyc2UiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwiam9icyIsInNhdmVKb2JzIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsIkdFVCIsImpzb24iLCJtZXNzYWdlIiwic3RhdHVzIiwiUE9TVCIsInJlcXVlc3QiLCJuYW1lIiwic2hlZXRVcmwiLCJjb2x1bW4iLCJzcHJlYWRzaGVldElkIiwiY3N2VXJsIiwicmVzcG9uc2UiLCJnZXQiLCJyb3dzIiwic3BsaXQiLCJoZWFkZXJzIiwibWFwIiwiY29sIiwidHJpbSIsInJlcGxhY2UiLCJjb2x1bW5JbmRleCIsImluZGV4T2YiLCJ1cmxzIiwic2xpY2UiLCJyb3ciLCJjZWxscyIsImNlbGwiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvYiIsImlkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwidG90YWxVcmxzIiwicHJvY2Vzc2VkVXJscyIsImVtYWlsc0ZvdW5kIiwicHJvZ3Jlc3MiLCJjcmVhdGVkQXQiLCJ0b0lTT1N0cmluZyIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/jobs/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/emailExtractor.ts":
/*!*******************************!*\
  !*** ./lib/emailExtractor.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmailExtractor: () => (/* binding */ EmailExtractor),\n/* harmony export */   extractEmails: () => (/* binding */ extractEmails),\n/* harmony export */   extractEmailsFromSpreadsheet: () => (/* binding */ extractEmailsFromSpreadsheet)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cheerio */ \"(rsc)/./node_modules/cheerio/lib/esm/index.js\");\n\n\n// Common email domains to look for\nconst COMMON_EMAIL_DOMAINS = [\n    \"gmail.com\",\n    \"yahoo.com\",\n    \"outlook.com\",\n    \"hotmail.com\",\n    \"aol.com\",\n    \"icloud.com\",\n    \"protonmail.com\",\n    \"mail.com\",\n    \"zoho.com\",\n    \"yandex.com\",\n    \"gmx.com\"\n];\n// Domains to ignore when extracting emails\nconst IGNORE_DOMAINS = [\n    \"wix.com\",\n    \"domain.com\",\n    \"example.com\",\n    \"sentry.io\",\n    \"wixpress.com\",\n    \"squarespace.com\",\n    \"wordpress.com\",\n    \"shopify.com\"\n];\n// Common paths for contact pages\nconst CONTACT_PAGES = [\n    \"/contact\",\n    \"/contact-us\",\n    \"/contact.html\",\n    \"/contact-us.html\",\n    \"/about\",\n    \"/about-us\",\n    \"/about.html\",\n    \"/about-us.html\",\n    \"/get-in-touch\",\n    \"/reach-us\",\n    \"/connect\",\n    \"/reach-out\",\n    \"/our-team\",\n    \"/team\",\n    \"/support\",\n    \"/help\",\n    \"/info\"\n];\n// Function to validate and clean email addresses\nfunction validateEmail(email) {\n    // Clean and validate the email format\n    email = email.trim().toLowerCase();\n    // Ignore image files and other non-email strings containing @ symbol\n    if (/\\.(png|jpg|jpeg|gif|svg|webp|ico)/.test(email)) {\n        return null;\n    }\n    // Remove any invalid start/end characters\n    email = email.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9\\.]+$/g, \"\");\n    // Check if the email follows a valid pattern\n    if (/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/.test(email)) {\n        // Ensure the email doesn't contain file extensions or other non-email patterns\n        const parts = email.split(\"@\");\n        if (parts.length === 2 && parts[1].includes(\".\")) {\n            const domainPart = parts[1];\n            // Check if the domain part looks valid (not an image or file name)\n            if (!/\\d+x\\d+/.test(domainPart)) {\n                return email;\n            }\n        }\n    }\n    return null;\n}\n// Extract domain from URL\nfunction getDomain(url) {\n    try {\n        const urlObj = new URL(url);\n        const hostParts = urlObj.hostname.split(\".\");\n        const domain = hostParts.length >= 2 ? `${hostParts[hostParts.length - 2]}.${hostParts[hostParts.length - 1]}` : urlObj.hostname;\n        return domain;\n    } catch  {\n        return null;\n    }\n}\n// Function to clean and deduplicate emails\nfunction cleanAndDeduplicateEmails(emailsList) {\n    if (!emailsList || emailsList.length === 0) {\n        return [];\n    }\n    // First round of cleaning and deduplication\n    const cleanEmails = new Set();\n    for (const email of emailsList){\n        const validEmail = validateEmail(email);\n        if (validEmail) {\n            // Skip emails from the ignore domains\n            if (!IGNORE_DOMAINS.some((ignoreDomain)=>validEmail.includes(ignoreDomain))) {\n                cleanEmails.add(validEmail);\n            }\n        }\n    }\n    // Handle cases where one email is contained within another or has extra characters\n    // (like \"892-0300info@digitalbytes.tv\" vs \"info@digitalbytes.tv\")\n    const emailsToRemove = new Set();\n    const finalEmails = Array.from(cleanEmails);\n    for(let i = 0; i < finalEmails.length; i++){\n        for(let j = 0; j < finalEmails.length; j++){\n            if (i !== j && finalEmails[i] !== finalEmails[j]) {\n                // Split emails into username and domain parts\n                const email1Parts = finalEmails[i].split(\"@\");\n                const email2Parts = finalEmails[j].split(\"@\");\n                // Check if they have the same domain\n                if (email1Parts.length === 2 && email2Parts.length === 2 && email1Parts[1] === email2Parts[1]) {\n                    const username1 = email1Parts[0];\n                    const username2 = email2Parts[0];\n                    // When one email appears inside another with extra characters (like digits before/after)\n                    if (finalEmails[i].includes(finalEmails[j])) {\n                        // Keep the shorter, cleaner one (contained inside)\n                        emailsToRemove.add(finalEmails[i]);\n                    } else if (finalEmails[j].includes(finalEmails[i])) {\n                        // Keep the shorter, cleaner one (contained inside)\n                        emailsToRemove.add(finalEmails[j]);\n                    } else if (username1.endsWith(username2)) {\n                        // Check if username1 has a prefix pattern like \"something.username2\"\n                        const prefix = username1.substring(0, username1.length - username2.length);\n                        if (prefix.endsWith(\".\") || prefix.endsWith(\"-\") || prefix.endsWith(\"_\")) {\n                            emailsToRemove.add(finalEmails[i]);\n                        }\n                    } else if (username2.endsWith(username1)) {\n                        // Check if username2 has a prefix pattern like \"something.username1\"\n                        const prefix = username2.substring(0, username2.length - username1.length);\n                        if (prefix.endsWith(\".\") || prefix.endsWith(\"-\") || prefix.endsWith(\"_\")) {\n                            emailsToRemove.add(finalEmails[j]);\n                        }\n                    } else if (containsNumbersOrSpecialChars(username1) && !containsNumbersOrSpecialChars(username2)) {\n                        // If username1 has numbers/special chars but username2 doesn't, prefer username2\n                        emailsToRemove.add(finalEmails[i]);\n                    } else if (containsNumbersOrSpecialChars(username2) && !containsNumbersOrSpecialChars(username1)) {\n                        // If username2 has numbers/special chars but username1 doesn't, prefer username1\n                        emailsToRemove.add(finalEmails[j]);\n                    }\n                }\n            }\n        }\n    }\n    // Remove emails flagged for removal\n    const finalCleaned = finalEmails.filter((email)=>!emailsToRemove.has(email));\n    return finalCleaned;\n}\n// Helper function to check if a string contains numbers or special characters\nfunction containsNumbersOrSpecialChars(str) {\n    return /[0-9!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,<>\\/?]+/.test(str);\n}\n// Function to extract emails from a website\nasync function extractEmails(baseUrl) {\n    const emailsSet = new Set();\n    const domain = getDomain(baseUrl);\n    // Process a single URL and extract emails\n    const processUrl = async (url, isContactPage = false)=>{\n        const localEmails = new Set();\n        try {\n            const headers = {\n                \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\"\n            };\n            const response = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(url, {\n                headers,\n                timeout: 15000\n            });\n            const htmlContent = response.data;\n            const $ = cheerio__WEBPACK_IMPORTED_MODULE_0__.load(htmlContent);\n            // Method 1: Extract emails from visible text\n            const textContent = $(\"body\").text();\n            const textEmails = textContent.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g) || [];\n            // Method 2: Extract emails from mailto links\n            const allATags = $(\"a\");\n            const mailtoEmails = [];\n            allATags.each((_, element)=>{\n                // Check href attribute\n                const href = $(element).attr(\"href\") || \"\";\n                if (href.includes(\"mailto:\")) {\n                    const email = href.replace(\"mailto:\", \"\").split(\"?\")[0].trim();\n                    mailtoEmails.push(decodeURIComponent(email));\n                }\n                // Also check other attributes for emails\n                const attrs = $(element).attr();\n                if (attrs) {\n                    Object.keys(attrs).forEach((attrName)=>{\n                        const attrValue = attrs[attrName];\n                        if (typeof attrValue === \"string\" && attrValue.includes(\"@\")) {\n                            const potentialEmails = attrValue.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                            if (potentialEmails) mailtoEmails.push(...potentialEmails);\n                        }\n                    });\n                }\n            });\n            // Method 3: Check for elements with email-related classes or IDs\n            const emailClasses = [\n                \"email\",\n                \"mail\",\n                \"e-mail\",\n                \"contact\",\n                \"email-address\",\n                \"mail-link\",\n                \"mini-contacts\",\n                \"footer-contact\",\n                \"header-contact\",\n                \"contact-info\",\n                \"contact-details\",\n                \"contact-email\",\n                \"footer-email\",\n                \"header-email\",\n                \"info\"\n            ];\n            const classEmails = [];\n            emailClasses.forEach((className)=>{\n                const elements = $(`[class*=${className}]`);\n                elements.each((_, element)=>{\n                    // Extract email from text content\n                    const elementText = $(element).text();\n                    const foundEmails = elementText.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                    if (foundEmails) classEmails.push(...foundEmails);\n                    // Also check attributes\n                    const attrs = $(element).attr();\n                    if (attrs) {\n                        Object.keys(attrs).forEach((attrName)=>{\n                            const attrValue = attrs[attrName];\n                            if (typeof attrValue === \"string\" && attrValue.includes(\"@\")) {\n                                const potentialEmails = attrValue.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                                if (potentialEmails) classEmails.push(...potentialEmails);\n                            }\n                        });\n                    }\n                });\n            });\n            // Method 4: Extract from all tags and attributes (comprehensive scan)\n            const allTagsEmails = [];\n            $(\"*\").each((_, tag)=>{\n                // Check tag content\n                if ($(tag).text().includes(\"@\")) {\n                    const foundEmails = $(tag).text().match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                    if (foundEmails) allTagsEmails.push(...foundEmails);\n                }\n                // Check all attributes\n                const attrs = $(tag).attr();\n                if (attrs) {\n                    Object.keys(attrs).forEach((attrName)=>{\n                        const attrValue = attrs[attrName];\n                        if (typeof attrValue === \"string\" && attrValue.includes(\"@\")) {\n                            const foundEmails = attrValue.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                            if (foundEmails) allTagsEmails.push(...foundEmails);\n                        }\n                    });\n                }\n            });\n            // Method 5: Extract from script tags\n            const scriptEmails = [];\n            const scriptTags = $(\"script\");\n            scriptTags.each((_, script)=>{\n                const scriptContent = $(script).html();\n                if (scriptContent) {\n                    // Look for explicit email field in JSON\n                    const emailPatterns = [\n                        /\"email\"\\s*:\\s*\"([^\"]+@[^\"]+\\.[^\"]+)\"/,\n                        /\"emailAddress\"\\s*:\\s*\"([^\"]+@[^\"]+\\.[^\"]+)\"/,\n                        /\"mail\"\\s*:\\s*\"([^\"]+@[^\"]+\\.[^\"]+)\"/,\n                        /\"e-mail\"\\s*:\\s*\"([^\"]+@[^\"]+\\.[^\"]+)\"/,\n                        /\"contactEmail\"\\s*:\\s*\"([^\"]+@[^\"]+\\.[^\"]+)\"/,\n                        /\"support_email\"\\s*:\\s*\"([^\"]+@[^\"]+\\.[^\"]+)\"/ // \"support_email\": \"example@domain.com\"\n                    ];\n                    emailPatterns.forEach((pattern)=>{\n                        const matches = scriptContent.match(pattern);\n                        if (matches && matches.length > 1) {\n                            scriptEmails.push(matches[1]);\n                        }\n                    });\n                    // Also extract general email pattern\n                    const generalEmails = scriptContent.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                    if (generalEmails) scriptEmails.push(...generalEmails);\n                    // Try to parse JSON data\n                    try {\n                        // Extract any JSON-like structures from the script\n                        const jsonMatches = scriptContent.match(/\\{[^{}]*\\}/g);\n                        if (jsonMatches) {\n                            jsonMatches.forEach((jsonStr)=>{\n                                try {\n                                    const data = JSON.parse(jsonStr);\n                                    // Recursively search for email keys in the JSON\n                                    const extractJsonEmails = (obj)=>{\n                                        const found = [];\n                                        if (typeof obj === \"object\" && obj !== null) {\n                                            if (Array.isArray(obj)) {\n                                                obj.forEach((item)=>{\n                                                    found.push(...extractJsonEmails(item));\n                                                });\n                                            } else {\n                                                for(const key in obj){\n                                                    if (typeof obj[key] === \"string\" && (key.toLowerCase().includes(\"email\") || key.toLowerCase().includes(\"mail\") || key.toLowerCase().includes(\"contact\"))) {\n                                                        const value = obj[key];\n                                                        if (value.includes(\"@\") && value.includes(\".\")) {\n                                                            found.push(value);\n                                                        }\n                                                    } else if (typeof obj[key] === \"object\" && obj[key] !== null) {\n                                                        found.push(...extractJsonEmails(obj[key]));\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        return found;\n                                    };\n                                    const jsonEmails = extractJsonEmails(data);\n                                    scriptEmails.push(...jsonEmails);\n                                } catch  {\n                                // Ignore JSON parse errors\n                                }\n                            });\n                        }\n                    } catch  {\n                    // Ignore JSON extraction errors\n                    }\n                }\n            });\n            // Method 6: Extract from meta tags\n            const metaEmails = [];\n            const metaTags = $(\"meta\");\n            metaTags.each((_, meta)=>{\n                const content = $(meta).attr(\"content\") || \"\";\n                if (content.includes(\"@\")) {\n                    const foundEmails = content.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                    if (foundEmails) metaEmails.push(...foundEmails);\n                }\n            });\n            // Method 7: Look specifically for common email domains in the entire HTML content\n            const domainBasedEmails = [];\n            COMMON_EMAIL_DOMAINS.forEach((emailDomain)=>{\n                // Find all text containing common email domains\n                const domainPattern = new RegExp(`[a-zA-Z0-9._%+-]+@${emailDomain.replace(\".\", \"\\\\.\")}`, \"g\");\n                const foundDomainEmails = htmlContent.match(domainPattern);\n                if (foundDomainEmails) domainBasedEmails.push(...foundDomainEmails);\n            });\n            // Method 8: Look for obfuscated emails (especially on contact pages)\n            if (isContactPage) {\n                // Look for JavaScript email obfuscation\n                scriptTags.each((_, script)=>{\n                    const scriptContent = $(script).html() || \"\";\n                    if (scriptContent.toLowerCase().includes(\"email\") || scriptContent.toLowerCase().includes(\"mail\") || scriptContent.toLowerCase().includes(\"contact\")) {\n                        // Check for string concatenation\n                        const concatPatterns = [\n                            /['\"]\\s*\\+\\s*['\"]/,\n                            /\\.join\\(/,\n                            /\\.reverse\\(/,\n                            /String\\.fromCharCode/ // Character code conversion\n                        ];\n                        const hasObfuscation = concatPatterns.some((pattern)=>pattern.test(scriptContent));\n                        if (hasObfuscation) {\n                            // Extract anything that looks like it could be part of email when concatenated\n                            const parts = scriptContent.match(/['\"]([a-zA-Z0-9._%+-@]+)['\"]/g);\n                            if (parts && parts.join(\"\").includes(\"@\")) {\n                                // Try simple reconstruction for common patterns\n                                const reconstructed = parts.join(\"\").replace(/['\"]/g, \"\");\n                                const potentialEmails = reconstructed.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                                if (potentialEmails) domainBasedEmails.push(...potentialEmails);\n                            }\n                        }\n                    }\n                });\n                // Look for emails in contact form HTML structure\n                const contactForms = $(\"form\");\n                contactForms.each((_, form)=>{\n                    // Check for hidden email fields\n                    const hiddenFields = $('input[type=\"hidden\"]', form);\n                    hiddenFields.each((_, field)=>{\n                        const value = $(field).attr(\"value\") || \"\";\n                        if (value.includes(\"@\")) {\n                            const foundEmails = value.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g);\n                            if (foundEmails) domainBasedEmails.push(...foundEmails);\n                        }\n                    });\n                });\n            }\n            // Combine all emails\n            const allExtractedEmails = [\n                ...textEmails,\n                ...mailtoEmails,\n                ...classEmails,\n                ...allTagsEmails,\n                ...scriptEmails,\n                ...metaEmails,\n                ...domainBasedEmails\n            ];\n            // Clean and add valid emails to the local set\n            allExtractedEmails.forEach((email)=>{\n                const validEmail = validateEmail(email);\n                if (validEmail && !IGNORE_DOMAINS.some((ignoreDomain)=>validEmail.includes(ignoreDomain))) {\n                    localEmails.add(validEmail);\n                }\n            });\n        } catch (error) {\n            console.error(`Error processing URL ${url}:`, error);\n        }\n        return localEmails;\n    };\n    // First process the main URL\n    const mainPageEmails = await processUrl(baseUrl);\n    mainPageEmails.forEach((email)=>emailsSet.add(email));\n    // Then process contact pages regardless of how many emails we found\n    // (to ensure we get the most accurate contact emails)\n    for (const contactPath of CONTACT_PAGES){\n        const contactUrl = new URL(contactPath, baseUrl).toString();\n        if (contactUrl !== baseUrl) {\n            try {\n                const contactPageEmails = await processUrl(contactUrl, true);\n                contactPageEmails.forEach((email)=>emailsSet.add(email));\n            } catch  {\n                continue;\n            }\n        }\n    }\n    // Clean and deduplicate emails\n    const allEmails = cleanAndDeduplicateEmails(Array.from(emailsSet));\n    // Prioritize emails with domain matching the website\n    const domainEmails = allEmails.filter((email)=>domain && email.includes(domain));\n    const otherEmails = allEmails.filter((email)=>!domainEmails.includes(email));\n    // Sort emails with domain emails first\n    const sortedEmails = [\n        ...domainEmails.sort(),\n        ...otherEmails.sort()\n    ];\n    return sortedEmails;\n}\nclass EmailExtractor {\n    constructor(baseUrl){\n        this.baseUrl = baseUrl;\n    }\n    async extractEmails() {\n        try {\n            return await extractEmails(this.baseUrl);\n        } catch (error) {\n            console.error(\"Error extracting emails:\", error);\n            return [];\n        }\n    }\n}\nasync function extractEmailsFromSpreadsheet(spreadsheetUrl, urlColumn) {\n    try {\n        // Convert Google Sheets URL to CSV export URL\n        const csvUrl = spreadsheetUrl.replace(/\\/edit.*$/, \"/export?format=csv\");\n        // Fetch the CSV content\n        const response = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(csvUrl);\n        const csvContent = response.data;\n        // Parse CSV content\n        const rows = csvContent.split(\"\\n\").map((row)=>row.split(\",\").map((cell)=>cell.trim()));\n        const headers = rows[0];\n        const urlColumnIndex = headers.indexOf(urlColumn);\n        if (urlColumnIndex === -1) {\n            throw new Error(`Column \"${urlColumn}\" not found in spreadsheet`);\n        }\n        const results = [];\n        // Process each row (skip header row)\n        for(let i = 1; i < rows.length; i++){\n            const row = rows[i];\n            if (row.length <= urlColumnIndex) continue;\n            const url = row[urlColumnIndex].replace(/^\"|\"$/g, \"\"); // Remove quotes if present\n            if (!url) continue;\n            try {\n                // Make sure URL has proper protocol\n                const properUrl = url.startsWith(\"http\") ? url : `https://${url}`;\n                const emails = await extractEmails(properUrl);\n                results.push({\n                    url: properUrl,\n                    emails\n                });\n            } catch (error) {\n                console.error(`Error processing ${url}:`, error);\n                results.push({\n                    url,\n                    emails: []\n                });\n            }\n        }\n        return results;\n    } catch (error) {\n        console.error(\"Error processing spreadsheet:\", error);\n        throw new Error(\"Failed to process spreadsheet\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFFVixJQUFJO2dCQUNGLG9DQUFvQztnQkFDcEMsTUFBTTRJLFlBQVk1SSxJQUFJNkksVUFBVSxDQUFDLFVBQVU3SSxNQUFNLENBQUMsUUFBUSxFQUFFQSxJQUFJLENBQUM7Z0JBQ2pFLE1BQU04SSxTQUFTLE1BQU05RyxjQUFjNEc7Z0JBQ25DRCxRQUFRbEYsSUFBSSxDQUFDO29CQUFFekQsS0FBSzRJO29CQUFXRTtnQkFBTztZQUN4QyxFQUFFLE9BQU83QixPQUFPO2dCQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRWpILElBQUksQ0FBQyxDQUFDLEVBQUVpSDtnQkFDMUMwQixRQUFRbEYsSUFBSSxDQUFDO29CQUFFekQ7b0JBQUs4SSxRQUFRLEVBQUU7Z0JBQUM7WUFDakM7UUFDRjtRQUVBLE9BQU9IO0lBQ1QsRUFBRSxPQUFPMUIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxNQUFNLElBQUl5QixNQUFNO0lBQ2xCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lbWFpbC1leHRyYWN0b3IvLi9saWIvZW1haWxFeHRyYWN0b3IudHM/YzJiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0ICogYXMgY2hlZXJpbyBmcm9tICdjaGVlcmlvJztcblxuLy8gQ29tbW9uIGVtYWlsIGRvbWFpbnMgdG8gbG9vayBmb3JcbmNvbnN0IENPTU1PTl9FTUFJTF9ET01BSU5TID0gW1xuICAnZ21haWwuY29tJyxcbiAgJ3lhaG9vLmNvbScsXG4gICdvdXRsb29rLmNvbScsXG4gICdob3RtYWlsLmNvbScsXG4gICdhb2wuY29tJyxcbiAgJ2ljbG91ZC5jb20nLFxuICAncHJvdG9ubWFpbC5jb20nLFxuICAnbWFpbC5jb20nLFxuICAnem9oby5jb20nLFxuICAneWFuZGV4LmNvbScsXG4gICdnbXguY29tJyxcbl07XG5cbi8vIERvbWFpbnMgdG8gaWdub3JlIHdoZW4gZXh0cmFjdGluZyBlbWFpbHNcbmNvbnN0IElHTk9SRV9ET01BSU5TID0gW1xuICAnd2l4LmNvbScsIFxuICAnZG9tYWluLmNvbScsIFxuICAnZXhhbXBsZS5jb20nLCBcbiAgJ3NlbnRyeS5pbycsIFxuICAnd2l4cHJlc3MuY29tJywgXG4gICdzcXVhcmVzcGFjZS5jb20nLCBcbiAgJ3dvcmRwcmVzcy5jb20nLCBcbiAgJ3Nob3BpZnkuY29tJ1xuXTtcblxuLy8gQ29tbW9uIHBhdGhzIGZvciBjb250YWN0IHBhZ2VzXG5jb25zdCBDT05UQUNUX1BBR0VTID0gW1xuICAnL2NvbnRhY3QnLCBcbiAgJy9jb250YWN0LXVzJywgXG4gICcvY29udGFjdC5odG1sJywgXG4gICcvY29udGFjdC11cy5odG1sJywgXG4gICcvYWJvdXQnLCBcbiAgJy9hYm91dC11cycsXG4gICcvYWJvdXQuaHRtbCcsIFxuICAnL2Fib3V0LXVzLmh0bWwnLCBcbiAgJy9nZXQtaW4tdG91Y2gnLCBcbiAgJy9yZWFjaC11cycsIFxuICAnL2Nvbm5lY3QnLCBcbiAgJy9yZWFjaC1vdXQnLFxuICAnL291ci10ZWFtJywgXG4gICcvdGVhbScsIFxuICAnL3N1cHBvcnQnLCBcbiAgJy9oZWxwJywgXG4gICcvaW5mbydcbl07XG5cbi8vIEZ1bmN0aW9uIHRvIHZhbGlkYXRlIGFuZCBjbGVhbiBlbWFpbCBhZGRyZXNzZXNcbmZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWw6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAvLyBDbGVhbiBhbmQgdmFsaWRhdGUgdGhlIGVtYWlsIGZvcm1hdFxuICBlbWFpbCA9IGVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICBcbiAgLy8gSWdub3JlIGltYWdlIGZpbGVzIGFuZCBvdGhlciBub24tZW1haWwgc3RyaW5ncyBjb250YWluaW5nIEAgc3ltYm9sXG4gIGlmICgvXFwuKHBuZ3xqcGd8anBlZ3xnaWZ8c3ZnfHdlYnB8aWNvKS8udGVzdChlbWFpbCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgLy8gUmVtb3ZlIGFueSBpbnZhbGlkIHN0YXJ0L2VuZCBjaGFyYWN0ZXJzXG4gIGVtYWlsID0gZW1haWwucmVwbGFjZSgvXlteYS16QS1aMC05XSt8W15hLXpBLVowLTlcXC5dKyQvZywgJycpO1xuICBcbiAgLy8gQ2hlY2sgaWYgdGhlIGVtYWlsIGZvbGxvd3MgYSB2YWxpZCBwYXR0ZXJuXG4gIGlmICgvXlthLXpBLVowLTkuXyUrLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Mix9JC8udGVzdChlbWFpbCkpIHtcbiAgICAvLyBFbnN1cmUgdGhlIGVtYWlsIGRvZXNuJ3QgY29udGFpbiBmaWxlIGV4dGVuc2lvbnMgb3Igb3RoZXIgbm9uLWVtYWlsIHBhdHRlcm5zXG4gICAgY29uc3QgcGFydHMgPSBlbWFpbC5zcGxpdCgnQCcpO1xuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIgJiYgcGFydHNbMV0uaW5jbHVkZXMoJy4nKSkge1xuICAgICAgY29uc3QgZG9tYWluUGFydCA9IHBhcnRzWzFdO1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGRvbWFpbiBwYXJ0IGxvb2tzIHZhbGlkIChub3QgYW4gaW1hZ2Ugb3IgZmlsZSBuYW1lKVxuICAgICAgaWYgKCEoL1xcZCt4XFxkKy8udGVzdChkb21haW5QYXJ0KSkpIHsgIC8vIFBhdHRlcm4gb2Z0ZW4gZm91bmQgaW4gaW1hZ2UgZGltZW5zaW9uc1xuICAgICAgICByZXR1cm4gZW1haWw7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBFeHRyYWN0IGRvbWFpbiBmcm9tIFVSTFxuZnVuY3Rpb24gZ2V0RG9tYWluKHVybDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xuICAgIGNvbnN0IGhvc3RQYXJ0cyA9IHVybE9iai5ob3N0bmFtZS5zcGxpdCgnLicpO1xuICAgIGNvbnN0IGRvbWFpbiA9IGhvc3RQYXJ0cy5sZW5ndGggPj0gMiA/IFxuICAgICAgYCR7aG9zdFBhcnRzW2hvc3RQYXJ0cy5sZW5ndGggLSAyXX0uJHtob3N0UGFydHNbaG9zdFBhcnRzLmxlbmd0aCAtIDFdfWAgOiBcbiAgICAgIHVybE9iai5ob3N0bmFtZTtcbiAgICByZXR1cm4gZG9tYWluO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byBjbGVhbiBhbmQgZGVkdXBsaWNhdGUgZW1haWxzXG5mdW5jdGlvbiBjbGVhbkFuZERlZHVwbGljYXRlRW1haWxzKGVtYWlsc0xpc3Q6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICBpZiAoIWVtYWlsc0xpc3QgfHwgZW1haWxzTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgXG4gIC8vIEZpcnN0IHJvdW5kIG9mIGNsZWFuaW5nIGFuZCBkZWR1cGxpY2F0aW9uXG4gIGNvbnN0IGNsZWFuRW1haWxzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgZW1haWwgb2YgZW1haWxzTGlzdCkge1xuICAgIGNvbnN0IHZhbGlkRW1haWwgPSB2YWxpZGF0ZUVtYWlsKGVtYWlsKTtcbiAgICBpZiAodmFsaWRFbWFpbCkge1xuICAgICAgLy8gU2tpcCBlbWFpbHMgZnJvbSB0aGUgaWdub3JlIGRvbWFpbnNcbiAgICAgIGlmICghSUdOT1JFX0RPTUFJTlMuc29tZShpZ25vcmVEb21haW4gPT4gdmFsaWRFbWFpbC5pbmNsdWRlcyhpZ25vcmVEb21haW4pKSkge1xuICAgICAgICBjbGVhbkVtYWlscy5hZGQodmFsaWRFbWFpbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBIYW5kbGUgY2FzZXMgd2hlcmUgb25lIGVtYWlsIGlzIGNvbnRhaW5lZCB3aXRoaW4gYW5vdGhlciBvciBoYXMgZXh0cmEgY2hhcmFjdGVyc1xuICAvLyAobGlrZSBcIjg5Mi0wMzAwaW5mb0BkaWdpdGFsYnl0ZXMudHZcIiB2cyBcImluZm9AZGlnaXRhbGJ5dGVzLnR2XCIpXG4gIGNvbnN0IGVtYWlsc1RvUmVtb3ZlID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IGZpbmFsRW1haWxzID0gQXJyYXkuZnJvbShjbGVhbkVtYWlscyk7XG4gIFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbmFsRW1haWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBmaW5hbEVtYWlscy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKGkgIT09IGogJiYgZmluYWxFbWFpbHNbaV0gIT09IGZpbmFsRW1haWxzW2pdKSB7XG4gICAgICAgIC8vIFNwbGl0IGVtYWlscyBpbnRvIHVzZXJuYW1lIGFuZCBkb21haW4gcGFydHNcbiAgICAgICAgY29uc3QgZW1haWwxUGFydHMgPSBmaW5hbEVtYWlsc1tpXS5zcGxpdCgnQCcpO1xuICAgICAgICBjb25zdCBlbWFpbDJQYXJ0cyA9IGZpbmFsRW1haWxzW2pdLnNwbGl0KCdAJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiB0aGV5IGhhdmUgdGhlIHNhbWUgZG9tYWluXG4gICAgICAgIGlmIChlbWFpbDFQYXJ0cy5sZW5ndGggPT09IDIgJiYgZW1haWwyUGFydHMubGVuZ3RoID09PSAyICYmIGVtYWlsMVBhcnRzWzFdID09PSBlbWFpbDJQYXJ0c1sxXSkge1xuICAgICAgICAgIGNvbnN0IHVzZXJuYW1lMSA9IGVtYWlsMVBhcnRzWzBdO1xuICAgICAgICAgIGNvbnN0IHVzZXJuYW1lMiA9IGVtYWlsMlBhcnRzWzBdO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFdoZW4gb25lIGVtYWlsIGFwcGVhcnMgaW5zaWRlIGFub3RoZXIgd2l0aCBleHRyYSBjaGFyYWN0ZXJzIChsaWtlIGRpZ2l0cyBiZWZvcmUvYWZ0ZXIpXG4gICAgICAgICAgaWYgKGZpbmFsRW1haWxzW2ldLmluY2x1ZGVzKGZpbmFsRW1haWxzW2pdKSkge1xuICAgICAgICAgICAgLy8gS2VlcCB0aGUgc2hvcnRlciwgY2xlYW5lciBvbmUgKGNvbnRhaW5lZCBpbnNpZGUpXG4gICAgICAgICAgICBlbWFpbHNUb1JlbW92ZS5hZGQoZmluYWxFbWFpbHNbaV0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZmluYWxFbWFpbHNbal0uaW5jbHVkZXMoZmluYWxFbWFpbHNbaV0pKSB7XG4gICAgICAgICAgICAvLyBLZWVwIHRoZSBzaG9ydGVyLCBjbGVhbmVyIG9uZSAoY29udGFpbmVkIGluc2lkZSlcbiAgICAgICAgICAgIGVtYWlsc1RvUmVtb3ZlLmFkZChmaW5hbEVtYWlsc1tqXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZXMgZm9yIGNvbW1vbiBwcmVmaXhlcyBsaWtlIHByb2plY3QuaW5mb0AgdnMgaW5mb0BcbiAgICAgICAgICBlbHNlIGlmICh1c2VybmFtZTEuZW5kc1dpdGgodXNlcm5hbWUyKSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlcm5hbWUxIGhhcyBhIHByZWZpeCBwYXR0ZXJuIGxpa2UgXCJzb21ldGhpbmcudXNlcm5hbWUyXCJcbiAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IHVzZXJuYW1lMS5zdWJzdHJpbmcoMCwgdXNlcm5hbWUxLmxlbmd0aCAtIHVzZXJuYW1lMi5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHByZWZpeC5lbmRzV2l0aCgnLicpIHx8IHByZWZpeC5lbmRzV2l0aCgnLScpIHx8IHByZWZpeC5lbmRzV2l0aCgnXycpKSB7XG4gICAgICAgICAgICAgIGVtYWlsc1RvUmVtb3ZlLmFkZChmaW5hbEVtYWlsc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh1c2VybmFtZTIuZW5kc1dpdGgodXNlcm5hbWUxKSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdXNlcm5hbWUyIGhhcyBhIHByZWZpeCBwYXR0ZXJuIGxpa2UgXCJzb21ldGhpbmcudXNlcm5hbWUxXCJcbiAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IHVzZXJuYW1lMi5zdWJzdHJpbmcoMCwgdXNlcm5hbWUyLmxlbmd0aCAtIHVzZXJuYW1lMS5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKHByZWZpeC5lbmRzV2l0aCgnLicpIHx8IHByZWZpeC5lbmRzV2l0aCgnLScpIHx8IHByZWZpeC5lbmRzV2l0aCgnXycpKSB7XG4gICAgICAgICAgICAgIGVtYWlsc1RvUmVtb3ZlLmFkZChmaW5hbEVtYWlsc1tqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEhhbmRsZSBjYXNlcyB3aXRoIG51bWJlcnMgb3Igb3RoZXIgY2hhcmFjdGVycyBpbnNlcnRlZCBvciBhcHBlbmRlZFxuICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5zTnVtYmVyc09yU3BlY2lhbENoYXJzKHVzZXJuYW1lMSkgJiYgIWNvbnRhaW5zTnVtYmVyc09yU3BlY2lhbENoYXJzKHVzZXJuYW1lMikpIHtcbiAgICAgICAgICAgIC8vIElmIHVzZXJuYW1lMSBoYXMgbnVtYmVycy9zcGVjaWFsIGNoYXJzIGJ1dCB1c2VybmFtZTIgZG9lc24ndCwgcHJlZmVyIHVzZXJuYW1lMlxuICAgICAgICAgICAgZW1haWxzVG9SZW1vdmUuYWRkKGZpbmFsRW1haWxzW2ldKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zTnVtYmVyc09yU3BlY2lhbENoYXJzKHVzZXJuYW1lMikgJiYgIWNvbnRhaW5zTnVtYmVyc09yU3BlY2lhbENoYXJzKHVzZXJuYW1lMSkpIHtcbiAgICAgICAgICAgIC8vIElmIHVzZXJuYW1lMiBoYXMgbnVtYmVycy9zcGVjaWFsIGNoYXJzIGJ1dCB1c2VybmFtZTEgZG9lc24ndCwgcHJlZmVyIHVzZXJuYW1lMVxuICAgICAgICAgICAgZW1haWxzVG9SZW1vdmUuYWRkKGZpbmFsRW1haWxzW2pdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIC8vIFJlbW92ZSBlbWFpbHMgZmxhZ2dlZCBmb3IgcmVtb3ZhbFxuICBjb25zdCBmaW5hbENsZWFuZWQgPSBmaW5hbEVtYWlscy5maWx0ZXIoZW1haWwgPT4gIWVtYWlsc1RvUmVtb3ZlLmhhcyhlbWFpbCkpO1xuICBcbiAgcmV0dXJuIGZpbmFsQ2xlYW5lZDtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgc3RyaW5nIGNvbnRhaW5zIG51bWJlcnMgb3Igc3BlY2lhbCBjaGFyYWN0ZXJzXG5mdW5jdGlvbiBjb250YWluc051bWJlcnNPclNwZWNpYWxDaGFycyhzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL1swLTkhQCMkJV4mKigpXytcXC09XFxbXFxde307JzpcIlxcXFx8LDw+XFwvP10rLy50ZXN0KHN0cik7XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGV4dHJhY3QgZW1haWxzIGZyb20gYSB3ZWJzaXRlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdEVtYWlscyhiYXNlVXJsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IGVtYWlsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCBkb21haW4gPSBnZXREb21haW4oYmFzZVVybCk7XG4gIFxuICAvLyBQcm9jZXNzIGEgc2luZ2xlIFVSTCBhbmQgZXh0cmFjdCBlbWFpbHNcbiAgY29uc3QgcHJvY2Vzc1VybCA9IGFzeW5jICh1cmw6IHN0cmluZywgaXNDb250YWN0UGFnZSA9IGZhbHNlKTogUHJvbWlzZTxTZXQ8c3RyaW5nPj4gPT4ge1xuICAgIGNvbnN0IGxvY2FsRW1haWxzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgIFwiVXNlci1BZ2VudFwiOiBcIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85MS4wLjQ0NzIuMTI0IFNhZmFyaS81MzcuMzZcIlxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwgeyBoZWFkZXJzLCB0aW1lb3V0OiAxNTAwMCB9KTtcbiAgICAgIGNvbnN0IGh0bWxDb250ZW50ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIGNvbnN0ICQgPSBjaGVlcmlvLmxvYWQoaHRtbENvbnRlbnQpO1xuICAgICAgXG4gICAgICAvLyBNZXRob2QgMTogRXh0cmFjdCBlbWFpbHMgZnJvbSB2aXNpYmxlIHRleHRcbiAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gJCgnYm9keScpLnRleHQoKTtcbiAgICAgIGNvbnN0IHRleHRFbWFpbHMgPSB0ZXh0Q29udGVudC5tYXRjaCgvW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0vZykgfHwgW107XG4gICAgICBcbiAgICAgIC8vIE1ldGhvZCAyOiBFeHRyYWN0IGVtYWlscyBmcm9tIG1haWx0byBsaW5rc1xuICAgICAgY29uc3QgYWxsQVRhZ3MgPSAkKCdhJyk7XG4gICAgICBjb25zdCBtYWlsdG9FbWFpbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBhbGxBVGFncy5lYWNoKChfLCBlbGVtZW50KSA9PiB7XG4gICAgICAgIC8vIENoZWNrIGhyZWYgYXR0cmlidXRlXG4gICAgICAgIGNvbnN0IGhyZWYgPSAkKGVsZW1lbnQpLmF0dHIoJ2hyZWYnKSB8fCAnJztcbiAgICAgICAgaWYgKGhyZWYuaW5jbHVkZXMoJ21haWx0bzonKSkge1xuICAgICAgICAgIGNvbnN0IGVtYWlsID0gaHJlZi5yZXBsYWNlKCdtYWlsdG86JywgJycpLnNwbGl0KCc/JylbMF0udHJpbSgpO1xuICAgICAgICAgIG1haWx0b0VtYWlscy5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChlbWFpbCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBbHNvIGNoZWNrIG90aGVyIGF0dHJpYnV0ZXMgZm9yIGVtYWlsc1xuICAgICAgICBjb25zdCBhdHRycyA9ICQoZWxlbWVudCkuYXR0cigpO1xuICAgICAgICBpZiAoYXR0cnMpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChhdHRyTmFtZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGF0dHJWYWx1ZSA9PT0gJ3N0cmluZycgJiYgYXR0clZhbHVlLmluY2x1ZGVzKCdAJykpIHtcbiAgICAgICAgICAgICAgY29uc3QgcG90ZW50aWFsRW1haWxzID0gYXR0clZhbHVlLm1hdGNoKC9bYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsfS9nKTtcbiAgICAgICAgICAgICAgaWYgKHBvdGVudGlhbEVtYWlscykgbWFpbHRvRW1haWxzLnB1c2goLi4ucG90ZW50aWFsRW1haWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE1ldGhvZCAzOiBDaGVjayBmb3IgZWxlbWVudHMgd2l0aCBlbWFpbC1yZWxhdGVkIGNsYXNzZXMgb3IgSURzXG4gICAgICBjb25zdCBlbWFpbENsYXNzZXMgPSBbXCJlbWFpbFwiLCBcIm1haWxcIiwgXCJlLW1haWxcIiwgXCJjb250YWN0XCIsIFwiZW1haWwtYWRkcmVzc1wiLCBcIm1haWwtbGlua1wiLCBcIm1pbmktY29udGFjdHNcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXCJmb290ZXItY29udGFjdFwiLCBcImhlYWRlci1jb250YWN0XCIsIFwiY29udGFjdC1pbmZvXCIsIFwiY29udGFjdC1kZXRhaWxzXCIsIFwiY29udGFjdC1lbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9vdGVyLWVtYWlsXCIsIFwiaGVhZGVyLWVtYWlsXCIsIFwiaW5mb1wiXTtcbiAgICAgIGNvbnN0IGNsYXNzRW1haWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgXG4gICAgICBlbWFpbENsYXNzZXMuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9ICQoYFtjbGFzcyo9JHtjbGFzc05hbWV9XWApO1xuICAgICAgICBlbGVtZW50cy5lYWNoKChfLCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgLy8gRXh0cmFjdCBlbWFpbCBmcm9tIHRleHQgY29udGVudFxuICAgICAgICAgIGNvbnN0IGVsZW1lbnRUZXh0ID0gJChlbGVtZW50KS50ZXh0KCk7XG4gICAgICAgICAgY29uc3QgZm91bmRFbWFpbHMgPSBlbGVtZW50VGV4dC5tYXRjaCgvW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0vZyk7XG4gICAgICAgICAgaWYgKGZvdW5kRW1haWxzKSBjbGFzc0VtYWlscy5wdXNoKC4uLmZvdW5kRW1haWxzKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbHNvIGNoZWNrIGF0dHJpYnV0ZXNcbiAgICAgICAgICBjb25zdCBhdHRycyA9ICQoZWxlbWVudCkuYXR0cigpO1xuICAgICAgICAgIGlmIChhdHRycykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goYXR0ck5hbWUgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgYXR0clZhbHVlID09PSAnc3RyaW5nJyAmJiBhdHRyVmFsdWUuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvdGVudGlhbEVtYWlscyA9IGF0dHJWYWx1ZS5tYXRjaCgvW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0vZyk7XG4gICAgICAgICAgICAgICAgaWYgKHBvdGVudGlhbEVtYWlscykgY2xhc3NFbWFpbHMucHVzaCguLi5wb3RlbnRpYWxFbWFpbHMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE1ldGhvZCA0OiBFeHRyYWN0IGZyb20gYWxsIHRhZ3MgYW5kIGF0dHJpYnV0ZXMgKGNvbXByZWhlbnNpdmUgc2NhbilcbiAgICAgIGNvbnN0IGFsbFRhZ3NFbWFpbHM6IHN0cmluZ1tdID0gW107XG4gICAgICAkKCcqJykuZWFjaCgoXywgdGFnKSA9PiB7XG4gICAgICAgIC8vIENoZWNrIHRhZyBjb250ZW50XG4gICAgICAgIGlmICgkKHRhZykudGV4dCgpLmluY2x1ZGVzKCdAJykpIHtcbiAgICAgICAgICBjb25zdCBmb3VuZEVtYWlscyA9ICQodGFnKS50ZXh0KCkubWF0Y2goL1thLXpBLVowLTkuXyUrLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Mix9L2cpO1xuICAgICAgICAgIGlmIChmb3VuZEVtYWlscykgYWxsVGFnc0VtYWlscy5wdXNoKC4uLmZvdW5kRW1haWxzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgYWxsIGF0dHJpYnV0ZXNcbiAgICAgICAgY29uc3QgYXR0cnMgPSAkKHRhZykuYXR0cigpO1xuICAgICAgICBpZiAoYXR0cnMpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChhdHRyTmFtZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGF0dHJWYWx1ZSA9PT0gJ3N0cmluZycgJiYgYXR0clZhbHVlLmluY2x1ZGVzKCdAJykpIHtcbiAgICAgICAgICAgICAgY29uc3QgZm91bmRFbWFpbHMgPSBhdHRyVmFsdWUubWF0Y2goL1thLXpBLVowLTkuXyUrLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Mix9L2cpO1xuICAgICAgICAgICAgICBpZiAoZm91bmRFbWFpbHMpIGFsbFRhZ3NFbWFpbHMucHVzaCguLi5mb3VuZEVtYWlscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBNZXRob2QgNTogRXh0cmFjdCBmcm9tIHNjcmlwdCB0YWdzXG4gICAgICBjb25zdCBzY3JpcHRFbWFpbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBzY3JpcHRUYWdzID0gJCgnc2NyaXB0Jyk7XG4gICAgICBzY3JpcHRUYWdzLmVhY2goKF8sIHNjcmlwdCkgPT4ge1xuICAgICAgICBjb25zdCBzY3JpcHRDb250ZW50ID0gJChzY3JpcHQpLmh0bWwoKTtcbiAgICAgICAgaWYgKHNjcmlwdENvbnRlbnQpIHtcbiAgICAgICAgICAvLyBMb29rIGZvciBleHBsaWNpdCBlbWFpbCBmaWVsZCBpbiBKU09OXG4gICAgICAgICAgY29uc3QgZW1haWxQYXR0ZXJucyA9IFtcbiAgICAgICAgICAgIC9cImVtYWlsXCJcXHMqOlxccypcIihbXlwiXStAW15cIl0rXFwuW15cIl0rKVwiLywgICAgICAgLy8gXCJlbWFpbFwiOiBcImV4YW1wbGVAZG9tYWluLmNvbVwiXG4gICAgICAgICAgICAvXCJlbWFpbEFkZHJlc3NcIlxccyo6XFxzKlwiKFteXCJdK0BbXlwiXStcXC5bXlwiXSspXCIvLCAvLyBcImVtYWlsQWRkcmVzc1wiOiBcImV4YW1wbGVAZG9tYWluLmNvbVwiXG4gICAgICAgICAgICAvXCJtYWlsXCJcXHMqOlxccypcIihbXlwiXStAW15cIl0rXFwuW15cIl0rKVwiLywgICAgICAgICAvLyBcIm1haWxcIjogXCJleGFtcGxlQGRvbWFpbi5jb21cIlxuICAgICAgICAgICAgL1wiZS1tYWlsXCJcXHMqOlxccypcIihbXlwiXStAW15cIl0rXFwuW15cIl0rKVwiLywgICAgICAgLy8gXCJlLW1haWxcIjogXCJleGFtcGxlQGRvbWFpbi5jb21cIlxuICAgICAgICAgICAgL1wiY29udGFjdEVtYWlsXCJcXHMqOlxccypcIihbXlwiXStAW15cIl0rXFwuW15cIl0rKVwiLywgLy8gXCJjb250YWN0RW1haWxcIjogXCJleGFtcGxlQGRvbWFpbi5jb21cIlxuICAgICAgICAgICAgL1wic3VwcG9ydF9lbWFpbFwiXFxzKjpcXHMqXCIoW15cIl0rQFteXCJdK1xcLlteXCJdKylcIi8gLy8gXCJzdXBwb3J0X2VtYWlsXCI6IFwiZXhhbXBsZUBkb21haW4uY29tXCJcbiAgICAgICAgICBdO1xuICAgICAgICAgIFxuICAgICAgICAgIGVtYWlsUGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBzY3JpcHRDb250ZW50Lm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIHNjcmlwdEVtYWlscy5wdXNoKG1hdGNoZXNbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFsc28gZXh0cmFjdCBnZW5lcmFsIGVtYWlsIHBhdHRlcm5cbiAgICAgICAgICBjb25zdCBnZW5lcmFsRW1haWxzID0gc2NyaXB0Q29udGVudC5tYXRjaCgvW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0vZyk7XG4gICAgICAgICAgaWYgKGdlbmVyYWxFbWFpbHMpIHNjcmlwdEVtYWlscy5wdXNoKC4uLmdlbmVyYWxFbWFpbHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRyeSB0byBwYXJzZSBKU09OIGRhdGFcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRXh0cmFjdCBhbnkgSlNPTi1saWtlIHN0cnVjdHVyZXMgZnJvbSB0aGUgc2NyaXB0XG4gICAgICAgICAgICBjb25zdCBqc29uTWF0Y2hlcyA9IHNjcmlwdENvbnRlbnQubWF0Y2goL1xce1tee31dKlxcfS9nKTtcbiAgICAgICAgICAgIGlmIChqc29uTWF0Y2hlcykge1xuICAgICAgICAgICAgICBqc29uTWF0Y2hlcy5mb3JFYWNoKGpzb25TdHIgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShqc29uU3RyKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgc2VhcmNoIGZvciBlbWFpbCBrZXlzIGluIHRoZSBKU09OXG4gICAgICAgICAgICAgICAgICBjb25zdCBleHRyYWN0SnNvbkVtYWlscyA9IChvYmo6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kLnB1c2goLi4uZXh0cmFjdEpzb25FbWFpbHMoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9ialtrZXldID09PSAnc3RyaW5nJyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZW1haWwnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbWFpbCcpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjb250YWN0JykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5jbHVkZXMoJ0AnKSAmJiB2YWx1ZS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9ialtrZXldID09PSAnb2JqZWN0JyAmJiBvYmpba2V5XSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kLnB1c2goLi4uZXh0cmFjdEpzb25FbWFpbHMob2JqW2tleV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgY29uc3QganNvbkVtYWlscyA9IGV4dHJhY3RKc29uRW1haWxzKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgc2NyaXB0RW1haWxzLnB1c2goLi4uanNvbkVtYWlscyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgSlNPTiBwYXJzZSBlcnJvcnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gSWdub3JlIEpTT04gZXh0cmFjdGlvbiBlcnJvcnNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBNZXRob2QgNjogRXh0cmFjdCBmcm9tIG1ldGEgdGFnc1xuICAgICAgY29uc3QgbWV0YUVtYWlsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IG1ldGFUYWdzID0gJCgnbWV0YScpO1xuICAgICAgbWV0YVRhZ3MuZWFjaCgoXywgbWV0YSkgPT4ge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gJChtZXRhKS5hdHRyKCdjb250ZW50JykgfHwgJyc7XG4gICAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCdAJykpIHtcbiAgICAgICAgICBjb25zdCBmb3VuZEVtYWlscyA9IGNvbnRlbnQubWF0Y2goL1thLXpBLVowLTkuXyUrLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Mix9L2cpO1xuICAgICAgICAgIGlmIChmb3VuZEVtYWlscykgbWV0YUVtYWlscy5wdXNoKC4uLmZvdW5kRW1haWxzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE1ldGhvZCA3OiBMb29rIHNwZWNpZmljYWxseSBmb3IgY29tbW9uIGVtYWlsIGRvbWFpbnMgaW4gdGhlIGVudGlyZSBIVE1MIGNvbnRlbnRcbiAgICAgIGNvbnN0IGRvbWFpbkJhc2VkRW1haWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgQ09NTU9OX0VNQUlMX0RPTUFJTlMuZm9yRWFjaChlbWFpbERvbWFpbiA9PiB7XG4gICAgICAgIC8vIEZpbmQgYWxsIHRleHQgY29udGFpbmluZyBjb21tb24gZW1haWwgZG9tYWluc1xuICAgICAgICBjb25zdCBkb21haW5QYXR0ZXJuID0gbmV3IFJlZ0V4cChgW2EtekEtWjAtOS5fJSstXStAJHtlbWFpbERvbWFpbi5yZXBsYWNlKCcuJywgJ1xcXFwuJyl9YCwgJ2cnKTtcbiAgICAgICAgY29uc3QgZm91bmREb21haW5FbWFpbHMgPSBodG1sQ29udGVudC5tYXRjaChkb21haW5QYXR0ZXJuKTtcbiAgICAgICAgaWYgKGZvdW5kRG9tYWluRW1haWxzKSBkb21haW5CYXNlZEVtYWlscy5wdXNoKC4uLmZvdW5kRG9tYWluRW1haWxzKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBNZXRob2QgODogTG9vayBmb3Igb2JmdXNjYXRlZCBlbWFpbHMgKGVzcGVjaWFsbHkgb24gY29udGFjdCBwYWdlcylcbiAgICAgIGlmIChpc0NvbnRhY3RQYWdlKSB7XG4gICAgICAgIC8vIExvb2sgZm9yIEphdmFTY3JpcHQgZW1haWwgb2JmdXNjYXRpb25cbiAgICAgICAgc2NyaXB0VGFncy5lYWNoKChfLCBzY3JpcHQpID0+IHtcbiAgICAgICAgICBjb25zdCBzY3JpcHRDb250ZW50ID0gJChzY3JpcHQpLmh0bWwoKSB8fCAnJztcbiAgICAgICAgICBpZiAoc2NyaXB0Q29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdlbWFpbCcpIHx8IFxuICAgICAgICAgICAgICBzY3JpcHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21haWwnKSB8fCBcbiAgICAgICAgICAgICAgc2NyaXB0Q29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjb250YWN0JykpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHN0cmluZyBjb25jYXRlbmF0aW9uXG4gICAgICAgICAgICBjb25zdCBjb25jYXRQYXR0ZXJucyA9IFtcbiAgICAgICAgICAgICAgL1snXCJdXFxzKlxcK1xccypbJ1wiXS8sICAvLyBcIitcIiBwYXR0ZXJucyBsaWtlICd1c2VyJyArICdAJyArICdkb21haW4uY29tJ1xuICAgICAgICAgICAgICAvXFwuam9pblxcKC8sICAgICAgICAgICAvLyBBcnJheS5qb2luKCkgbWV0aG9kXG4gICAgICAgICAgICAgIC9cXC5yZXZlcnNlXFwoLywgICAgICAgIC8vIFN0cmluZyBvciBhcnJheSByZXZlcnNlKClcbiAgICAgICAgICAgICAgL1N0cmluZ1xcLmZyb21DaGFyQ29kZS8gLy8gQ2hhcmFjdGVyIGNvZGUgY29udmVyc2lvblxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaGFzT2JmdXNjYXRpb24gPSBjb25jYXRQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KHNjcmlwdENvbnRlbnQpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGhhc09iZnVzY2F0aW9uKSB7XG4gICAgICAgICAgICAgIC8vIEV4dHJhY3QgYW55dGhpbmcgdGhhdCBsb29rcyBsaWtlIGl0IGNvdWxkIGJlIHBhcnQgb2YgZW1haWwgd2hlbiBjb25jYXRlbmF0ZWRcbiAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBzY3JpcHRDb250ZW50Lm1hdGNoKC9bJ1wiXShbYS16QS1aMC05Ll8lKy1AXSspWydcIl0vZyk7XG4gICAgICAgICAgICAgIGlmIChwYXJ0cyAmJiBwYXJ0cy5qb2luKCcnKS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IHNpbXBsZSByZWNvbnN0cnVjdGlvbiBmb3IgY29tbW9uIHBhdHRlcm5zXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjb25zdHJ1Y3RlZCA9IHBhcnRzLmpvaW4oJycpLnJlcGxhY2UoL1snXCJdL2csICcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwb3RlbnRpYWxFbWFpbHMgPSByZWNvbnN0cnVjdGVkLm1hdGNoKC9bYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsfS9nKTtcbiAgICAgICAgICAgICAgICBpZiAocG90ZW50aWFsRW1haWxzKSBkb21haW5CYXNlZEVtYWlscy5wdXNoKC4uLnBvdGVudGlhbEVtYWlscyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9vayBmb3IgZW1haWxzIGluIGNvbnRhY3QgZm9ybSBIVE1MIHN0cnVjdHVyZVxuICAgICAgICBjb25zdCBjb250YWN0Rm9ybXMgPSAkKCdmb3JtJyk7XG4gICAgICAgIGNvbnRhY3RGb3Jtcy5lYWNoKChfLCBmb3JtKSA9PiB7XG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIGhpZGRlbiBlbWFpbCBmaWVsZHNcbiAgICAgICAgICBjb25zdCBoaWRkZW5GaWVsZHMgPSAkKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJywgZm9ybSk7XG4gICAgICAgICAgaGlkZGVuRmllbGRzLmVhY2goKF8sIGZpZWxkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9ICQoZmllbGQpLmF0dHIoJ3ZhbHVlJykgfHwgJyc7XG4gICAgICAgICAgICBpZiAodmFsdWUuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgICAgICAgICBjb25zdCBmb3VuZEVtYWlscyA9IHZhbHVlLm1hdGNoKC9bYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsfS9nKTtcbiAgICAgICAgICAgICAgaWYgKGZvdW5kRW1haWxzKSBkb21haW5CYXNlZEVtYWlscy5wdXNoKC4uLmZvdW5kRW1haWxzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbWJpbmUgYWxsIGVtYWlsc1xuICAgICAgY29uc3QgYWxsRXh0cmFjdGVkRW1haWxzID0gW1xuICAgICAgICAuLi50ZXh0RW1haWxzLFxuICAgICAgICAuLi5tYWlsdG9FbWFpbHMsXG4gICAgICAgIC4uLmNsYXNzRW1haWxzLFxuICAgICAgICAuLi5hbGxUYWdzRW1haWxzLFxuICAgICAgICAuLi5zY3JpcHRFbWFpbHMsIFxuICAgICAgICAuLi5tZXRhRW1haWxzLFxuICAgICAgICAuLi5kb21haW5CYXNlZEVtYWlsc1xuICAgICAgXTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gYW5kIGFkZCB2YWxpZCBlbWFpbHMgdG8gdGhlIGxvY2FsIHNldFxuICAgICAgYWxsRXh0cmFjdGVkRW1haWxzLmZvckVhY2goZW1haWwgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEVtYWlsID0gdmFsaWRhdGVFbWFpbChlbWFpbCk7XG4gICAgICAgIGlmICh2YWxpZEVtYWlsICYmICFJR05PUkVfRE9NQUlOUy5zb21lKGlnbm9yZURvbWFpbiA9PiB2YWxpZEVtYWlsLmluY2x1ZGVzKGlnbm9yZURvbWFpbikpKSB7XG4gICAgICAgICAgbG9jYWxFbWFpbHMuYWRkKHZhbGlkRW1haWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIFVSTCAke3VybH06YCwgZXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbG9jYWxFbWFpbHM7XG4gIH07XG4gIFxuICAvLyBGaXJzdCBwcm9jZXNzIHRoZSBtYWluIFVSTFxuICBjb25zdCBtYWluUGFnZUVtYWlscyA9IGF3YWl0IHByb2Nlc3NVcmwoYmFzZVVybCk7XG4gIG1haW5QYWdlRW1haWxzLmZvckVhY2goZW1haWwgPT4gZW1haWxzU2V0LmFkZChlbWFpbCkpO1xuICBcbiAgLy8gVGhlbiBwcm9jZXNzIGNvbnRhY3QgcGFnZXMgcmVnYXJkbGVzcyBvZiBob3cgbWFueSBlbWFpbHMgd2UgZm91bmRcbiAgLy8gKHRvIGVuc3VyZSB3ZSBnZXQgdGhlIG1vc3QgYWNjdXJhdGUgY29udGFjdCBlbWFpbHMpXG4gIGZvciAoY29uc3QgY29udGFjdFBhdGggb2YgQ09OVEFDVF9QQUdFUykge1xuICAgIGNvbnN0IGNvbnRhY3RVcmwgPSBuZXcgVVJMKGNvbnRhY3RQYXRoLCBiYXNlVXJsKS50b1N0cmluZygpO1xuICAgIGlmIChjb250YWN0VXJsICE9PSBiYXNlVXJsKSB7ICAvLyBBdm9pZCBwcm9jZXNzaW5nIHRoZSBzYW1lIFVSTCB0d2ljZVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGFjdFBhZ2VFbWFpbHMgPSBhd2FpdCBwcm9jZXNzVXJsKGNvbnRhY3RVcmwsIHRydWUpO1xuICAgICAgICBjb250YWN0UGFnZUVtYWlscy5mb3JFYWNoKGVtYWlsID0+IGVtYWlsc1NldC5hZGQoZW1haWwpKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIC8vIENsZWFuIGFuZCBkZWR1cGxpY2F0ZSBlbWFpbHNcbiAgY29uc3QgYWxsRW1haWxzID0gY2xlYW5BbmREZWR1cGxpY2F0ZUVtYWlscyhBcnJheS5mcm9tKGVtYWlsc1NldCkpO1xuICBcbiAgLy8gUHJpb3JpdGl6ZSBlbWFpbHMgd2l0aCBkb21haW4gbWF0Y2hpbmcgdGhlIHdlYnNpdGVcbiAgY29uc3QgZG9tYWluRW1haWxzID0gYWxsRW1haWxzLmZpbHRlcihlbWFpbCA9PiBkb21haW4gJiYgZW1haWwuaW5jbHVkZXMoZG9tYWluKSk7XG4gIGNvbnN0IG90aGVyRW1haWxzID0gYWxsRW1haWxzLmZpbHRlcihlbWFpbCA9PiAhZG9tYWluRW1haWxzLmluY2x1ZGVzKGVtYWlsKSk7XG4gIFxuICAvLyBTb3J0IGVtYWlscyB3aXRoIGRvbWFpbiBlbWFpbHMgZmlyc3RcbiAgY29uc3Qgc29ydGVkRW1haWxzID0gWy4uLmRvbWFpbkVtYWlscy5zb3J0KCksIC4uLm90aGVyRW1haWxzLnNvcnQoKV07XG4gIFxuICByZXR1cm4gc29ydGVkRW1haWxzO1xufVxuXG5leHBvcnQgY2xhc3MgRW1haWxFeHRyYWN0b3Ige1xuICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGV4dHJhY3RFbWFpbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZXh0cmFjdEVtYWlscyh0aGlzLmJhc2VVcmwpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIGVtYWlsczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0RW1haWxzRnJvbVNwcmVhZHNoZWV0KFxuICBzcHJlYWRzaGVldFVybDogc3RyaW5nLFxuICB1cmxDb2x1bW46IHN0cmluZ1xuKTogUHJvbWlzZTx7IHVybDogc3RyaW5nOyBlbWFpbHM6IHN0cmluZ1tdIH1bXT4ge1xuICB0cnkge1xuICAgIC8vIENvbnZlcnQgR29vZ2xlIFNoZWV0cyBVUkwgdG8gQ1NWIGV4cG9ydCBVUkxcbiAgICBjb25zdCBjc3ZVcmwgPSBzcHJlYWRzaGVldFVybC5yZXBsYWNlKC9cXC9lZGl0LiokLywgJy9leHBvcnQ/Zm9ybWF0PWNzdicpO1xuICAgIFxuICAgIC8vIEZldGNoIHRoZSBDU1YgY29udGVudFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGNzdlVybCk7XG4gICAgY29uc3QgY3N2Q29udGVudCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgXG4gICAgLy8gUGFyc2UgQ1NWIGNvbnRlbnRcbiAgICBjb25zdCByb3dzID0gY3N2Q29udGVudC5zcGxpdCgnXFxuJykubWFwKChyb3c6IHN0cmluZykgPT4gcm93LnNwbGl0KCcsJykubWFwKGNlbGwgPT4gY2VsbC50cmltKCkpKTtcbiAgICBjb25zdCBoZWFkZXJzID0gcm93c1swXTtcbiAgICBjb25zdCB1cmxDb2x1bW5JbmRleCA9IGhlYWRlcnMuaW5kZXhPZih1cmxDb2x1bW4pO1xuICAgIFxuICAgIGlmICh1cmxDb2x1bW5JbmRleCA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29sdW1uIFwiJHt1cmxDb2x1bW59XCIgbm90IGZvdW5kIGluIHNwcmVhZHNoZWV0YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0czogeyB1cmw6IHN0cmluZzsgZW1haWxzOiBzdHJpbmdbXSB9W10gPSBbXTtcbiAgICBcbiAgICAvLyBQcm9jZXNzIGVhY2ggcm93IChza2lwIGhlYWRlciByb3cpXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgICAgaWYgKHJvdy5sZW5ndGggPD0gdXJsQ29sdW1uSW5kZXgpIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICBjb25zdCB1cmwgPSByb3dbdXJsQ29sdW1uSW5kZXhdLnJlcGxhY2UoL15cInxcIiQvZywgJycpOyAvLyBSZW1vdmUgcXVvdGVzIGlmIHByZXNlbnRcbiAgICAgIGlmICghdXJsKSBjb250aW51ZTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIFVSTCBoYXMgcHJvcGVyIHByb3RvY29sXG4gICAgICAgIGNvbnN0IHByb3BlclVybCA9IHVybC5zdGFydHNXaXRoKCdodHRwJykgPyB1cmwgOiBgaHR0cHM6Ly8ke3VybH1gO1xuICAgICAgICBjb25zdCBlbWFpbHMgPSBhd2FpdCBleHRyYWN0RW1haWxzKHByb3BlclVybCk7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7IHVybDogcHJvcGVyVXJsLCBlbWFpbHMgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nICR7dXJsfTpgLCBlcnJvcik7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7IHVybCwgZW1haWxzOiBbXSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIHNwcmVhZHNoZWV0OicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwcm9jZXNzIHNwcmVhZHNoZWV0Jyk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImF4aW9zIiwiY2hlZXJpbyIsIkNPTU1PTl9FTUFJTF9ET01BSU5TIiwiSUdOT1JFX0RPTUFJTlMiLCJDT05UQUNUX1BBR0VTIiwidmFsaWRhdGVFbWFpbCIsImVtYWlsIiwidHJpbSIsInRvTG93ZXJDYXNlIiwidGVzdCIsInJlcGxhY2UiLCJwYXJ0cyIsInNwbGl0IiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJkb21haW5QYXJ0IiwiZ2V0RG9tYWluIiwidXJsIiwidXJsT2JqIiwiVVJMIiwiaG9zdFBhcnRzIiwiaG9zdG5hbWUiLCJkb21haW4iLCJjbGVhbkFuZERlZHVwbGljYXRlRW1haWxzIiwiZW1haWxzTGlzdCIsImNsZWFuRW1haWxzIiwiU2V0IiwidmFsaWRFbWFpbCIsInNvbWUiLCJpZ25vcmVEb21haW4iLCJhZGQiLCJlbWFpbHNUb1JlbW92ZSIsImZpbmFsRW1haWxzIiwiQXJyYXkiLCJmcm9tIiwiaSIsImoiLCJlbWFpbDFQYXJ0cyIsImVtYWlsMlBhcnRzIiwidXNlcm5hbWUxIiwidXNlcm5hbWUyIiwiZW5kc1dpdGgiLCJwcmVmaXgiLCJzdWJzdHJpbmciLCJjb250YWluc051bWJlcnNPclNwZWNpYWxDaGFycyIsImZpbmFsQ2xlYW5lZCIsImZpbHRlciIsImhhcyIsInN0ciIsImV4dHJhY3RFbWFpbHMiLCJiYXNlVXJsIiwiZW1haWxzU2V0IiwicHJvY2Vzc1VybCIsImlzQ29udGFjdFBhZ2UiLCJsb2NhbEVtYWlscyIsImhlYWRlcnMiLCJyZXNwb25zZSIsImdldCIsInRpbWVvdXQiLCJodG1sQ29udGVudCIsImRhdGEiLCIkIiwibG9hZCIsInRleHRDb250ZW50IiwidGV4dCIsInRleHRFbWFpbHMiLCJtYXRjaCIsImFsbEFUYWdzIiwibWFpbHRvRW1haWxzIiwiZWFjaCIsIl8iLCJlbGVtZW50IiwiaHJlZiIsImF0dHIiLCJwdXNoIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXR0cnMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImF0dHJOYW1lIiwiYXR0clZhbHVlIiwicG90ZW50aWFsRW1haWxzIiwiZW1haWxDbGFzc2VzIiwiY2xhc3NFbWFpbHMiLCJjbGFzc05hbWUiLCJlbGVtZW50cyIsImVsZW1lbnRUZXh0IiwiZm91bmRFbWFpbHMiLCJhbGxUYWdzRW1haWxzIiwidGFnIiwic2NyaXB0RW1haWxzIiwic2NyaXB0VGFncyIsInNjcmlwdCIsInNjcmlwdENvbnRlbnQiLCJodG1sIiwiZW1haWxQYXR0ZXJucyIsInBhdHRlcm4iLCJtYXRjaGVzIiwiZ2VuZXJhbEVtYWlscyIsImpzb25NYXRjaGVzIiwianNvblN0ciIsIkpTT04iLCJwYXJzZSIsImV4dHJhY3RKc29uRW1haWxzIiwib2JqIiwiZm91bmQiLCJpc0FycmF5IiwiaXRlbSIsImtleSIsInZhbHVlIiwianNvbkVtYWlscyIsIm1ldGFFbWFpbHMiLCJtZXRhVGFncyIsIm1ldGEiLCJjb250ZW50IiwiZG9tYWluQmFzZWRFbWFpbHMiLCJlbWFpbERvbWFpbiIsImRvbWFpblBhdHRlcm4iLCJSZWdFeHAiLCJmb3VuZERvbWFpbkVtYWlscyIsImNvbmNhdFBhdHRlcm5zIiwiaGFzT2JmdXNjYXRpb24iLCJqb2luIiwicmVjb25zdHJ1Y3RlZCIsImNvbnRhY3RGb3JtcyIsImZvcm0iLCJoaWRkZW5GaWVsZHMiLCJmaWVsZCIsImFsbEV4dHJhY3RlZEVtYWlscyIsImVycm9yIiwiY29uc29sZSIsIm1haW5QYWdlRW1haWxzIiwiY29udGFjdFBhdGgiLCJjb250YWN0VXJsIiwidG9TdHJpbmciLCJjb250YWN0UGFnZUVtYWlscyIsImFsbEVtYWlscyIsImRvbWFpbkVtYWlscyIsIm90aGVyRW1haWxzIiwic29ydGVkRW1haWxzIiwic29ydCIsIkVtYWlsRXh0cmFjdG9yIiwiY29uc3RydWN0b3IiLCJleHRyYWN0RW1haWxzRnJvbVNwcmVhZHNoZWV0Iiwic3ByZWFkc2hlZXRVcmwiLCJ1cmxDb2x1bW4iLCJjc3ZVcmwiLCJjc3ZDb250ZW50Iiwicm93cyIsIm1hcCIsInJvdyIsImNlbGwiLCJ1cmxDb2x1bW5JbmRleCIsImluZGV4T2YiLCJFcnJvciIsInJlc3VsdHMiLCJwcm9wZXJVcmwiLCJzdGFydHNXaXRoIiwiZW1haWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/emailExtractor.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/get-intrinsic","vendor-chunks/form-data","vendor-chunks/asynckit","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/es-set-tostringtag","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/es-define-property","vendor-chunks/gopd","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/parse5","vendor-chunks/cheerio","vendor-chunks/css-select","vendor-chunks/entities","vendor-chunks/domutils","vendor-chunks/nth-check","vendor-chunks/htmlparser2","vendor-chunks/cheerio-select","vendor-chunks/domhandler","vendor-chunks/dom-serializer","vendor-chunks/css-what","vendor-chunks/parse5-htmlparser2-tree-adapter","vendor-chunks/domelementtype","vendor-chunks/boolbase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&page=%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjobs%2F%5Bid%5D%2Fprocess%2Froute.ts&appDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsankalp%2Ffs5%2Femail-extractor&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();